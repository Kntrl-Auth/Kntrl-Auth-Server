openapi: 3.0.1
info:
  description: |+
    This is the API that Kntrl server uses for integration with plugins.
    To implement plugin you must add next http endpoints to your server

  title: Kntrl plugin API
  version: "0.9"
  x-logo:
    url: ./logo.png
servers:
- url: /
tags:
- name: plugin/rate-limiter
  x-displayName:
  - Rate limiter API
- name: plugin/auth
  x-displayName:
  - Auth plugin API
- name: plugin/repo/session
  x-displayName:
  - Session repo API
- name: plugin/repo/user
  x-displayName:
  - User repo API
paths:
  /plugin/rate-limiter/{id}/burn-quota:
    post:
      description: |-
        Performs INCREMENT and GET operation.
        Adds `quota` amount to stored rate-limiter by limiter-id and returns it.
      operationId: burnQuota
      parameters:
      - explode: false
        in: path
        name: id
        required: true
        schema:
          $ref: '#/components/schemas/RateLimiterStateId'
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BurnQuotaReq'
        required: true
      responses:
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RateLimiterState'
          description: Success
        "4XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
          description: Client error
        "5XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
          description: Server error
      tags:
      - plugin/rate-limiter
      x-order: 1
      x-content-type: application/json
      x-accepts: application/json
      x-tags:
      - tag: plugin/rate-limiter
  /plugin/auth/authenticate/dry-run:
    post:
      description: |
        This is called before sign-in (or sign-up if user isn't identified). Performs validation of request.
      operationId: authenticateDryRun
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthReq'
        required: true
      responses:
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DryRunAuthRes'
          description: Success
        "4XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
          description: Client error
        "5XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
          description: Server error
      summary: Authenticate dry-run
      tags:
      - plugin/auth
      x-order: 1
      x-content-type: application/json
      x-accepts: application/json
      x-tags:
      - tag: plugin/auth
  /plugin/repository/session/{id}:
    get:
      description: |
        Find single session
      operationId: findSession
      parameters:
      - explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindSessionRes'
          description: Success
        "4XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
          description: Client error
        "5XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
          description: Server error
      summary: Find session by id
      tags:
      - plugin/repo/session
      x-order: 1
      x-accepts: application/json
      x-tags:
      - tag: plugin/repo/session
  /plugin/repository/user:
    get:
      description: |
        Finds user by login.
      operationId: findUser
      parameters:
      - explode: true
        in: query
        name: login-type
        required: true
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: login
        required: true
        schema:
          type: string
        style: form
      responses:
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindUserRes'
          description: Success
        "4XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
          description: Client error
        "5XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
          description: Server error
      summary: Find user
      tags:
      - plugin/repo/user
      x-order: 1
      x-accepts: application/json
      x-tags:
      - tag: plugin/repo/user
    post:
      description: |
        Saves users.
        Be careful with order. To avoid potential "duplicated entry" problem, remove operation goes firs,
        then update, then insert.
      operationId: saveUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveUserReq'
        required: true
      responses:
        default:
          content:
            application/json: {}
          description: Success
        "4XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
          description: Client error
        "5XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
          description: Server error
      summary: Find user
      tags:
      - plugin/repo/user
      x-order: 2
      x-content-type: application/json
      x-accepts: application/json
      x-tags:
      - tag: plugin/repo/user
  /plugin/auth/authenticate:
    post:
      description: |
        Called during sign-in (or sign-up if user isn't identified).
      operationId: authenticate
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthReq'
        required: true
      responses:
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthRes'
          description: Success
        "4XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
          description: Client error
        "5XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
          description: Server error
      security:
      - access-token: []
      summary: Authenticate
      tags:
      - plugin/auth
      x-order: 2
      x-content-type: application/json
      x-accepts: application/json
      x-tags:
      - tag: plugin/auth
  /plugin/repository/session:
    get:
      description: |
        Find all user sessions
      operationId: findSessions
      parameters:
      - explode: true
        in: query
        name: userId
        required: true
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: entry
        required: false
        schema:
          type: string
        style: form
      responses:
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindSessionsRes'
          description: Success
        "4XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
          description: Client error
        "5XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
          description: Server error
      summary: Find sessions
      tags:
      - plugin/repo/session
      x-order: 2
      x-accepts: application/json
      x-tags:
      - tag: plugin/repo/session
    post:
      description: |
        Save/update/remove sessions
      operationId: saveSession
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveSessionReq'
        required: true
      responses:
        default:
          content:
            application/json: {}
          description: Success
        "4XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
          description: Client error
        "5XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
          description: Server error
      summary: Save sessions
      tags:
      - plugin/repo/session
      x-order: 3
      x-content-type: application/json
      x-accepts: application/json
      x-tags:
      - tag: plugin/repo/session
  /plugin/auth/update/dry-run:
    post:
      description: |
        This is called before sign-up or auth enabling. Performs validation of request.
      operationId: updateAuthDryRun
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthReq'
        required: true
      responses:
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DryRunAuthRes'
          description: Success
        "4XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
          description: Client error
        "5XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
          description: Server error
      summary: Update auth dry-run
      tags:
      - plugin/auth
      x-order: 3
      x-content-type: application/json
      x-accepts: application/json
      x-tags:
      - tag: plugin/auth
  /plugin/auth/update:
    post:
      description: |
        This is called during sign-up or auth enabling.
      operationId: updateAuth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthReq'
        required: true
      responses:
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthRes'
          description: Success
        "4XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
          description: Client error
        "5XX":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
          description: Server error
      summary: Update auth
      tags:
      - plugin/auth
      x-order: 4
      x-content-type: application/json
      x-accepts: application/json
      x-tags:
      - tag: plugin/auth
components:
  schemas:
    Err:
      additionalProperties: true
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
        changedAt:
          format: int64
          type: integer
          x-nullable: true
        changedDaysAgo:
          format: int64
          type: integer
          x-nullable: true
        tooLong:
          type: boolean
        tooShort:
          type: boolean
        missingNumber:
          type: boolean
        missingSymbol:
          type: boolean
        missingUpperCase:
          type: boolean
        missingLowerCase:
          type: boolean
        commonPassword:
          type: boolean
        wasUsedBeforeAt:
          format: int64
          type: integer
          x-nullable: true
        matchesLogin:
          $ref: '#/components/schemas/LoginId'
        passwordsMismatch:
          type: boolean
        strength:
          type: string
          x-nullable: true
        wasUsedDaysAgo:
          format: int64
          type: integer
        incorrectAnswers:
          items:
            type: string
          type: array
        requiresMoreAnswers:
          type: boolean
        questionsNotFound:
          items:
            type: string
          type: array
        invalidAnswers:
          additionalProperties:
            $ref: '#/components/schemas/AnswerErr'
          type: object
        tooManyAnswers:
          type: boolean
        waitTimeMs:
          format: int32
          type: integer
          x-nullable: true
        waitTimeSeconds:
          format: int32
          type: integer
          x-nullable: true
        waitTimeMinutes:
          format: int32
          type: integer
          x-nullable: true
        expiredAt:
          format: int64
          type: integer
          x-nullable: true
        loginId:
          $ref: '#/components/schemas/LoginId'
      required:
      - code
      - devMsg
      type: object
      x-order: 2025349183-0
      x-sealed: false
    AccessDenied:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -2065236468-1
      x-super: '#/components/schemas/Unauthenticated'
    AnswerErr:
      properties:
        tooShort:
          type: boolean
        tooLong:
          type: boolean
      required:
      - tooLong
      - tooShort
      type: object
      x-order: -1279700867-9
    AnyErr:
      additionalProperties: true
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: 2025349183-5
      x-super: '#/components/schemas/Err'
    AuthIsNotConfirmed:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-3
      x-super: '#/components/schemas/ClientErr'
    AuthIsNotEnabled:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-2
      x-super: '#/components/schemas/ClientErr'
    AuthRequiresAnother:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-5
      x-super: '#/components/schemas/ClientErr'
    ClientErr:
      additionalProperties: true
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
        changedAt:
          format: int64
          type: integer
          x-nullable: true
        changedDaysAgo:
          format: int64
          type: integer
          x-nullable: true
        tooLong:
          type: boolean
        tooShort:
          type: boolean
        missingNumber:
          type: boolean
        missingSymbol:
          type: boolean
        missingUpperCase:
          type: boolean
        missingLowerCase:
          type: boolean
        commonPassword:
          type: boolean
        wasUsedBeforeAt:
          format: int64
          type: integer
          x-nullable: true
        matchesLogin:
          $ref: '#/components/schemas/LoginId'
        passwordsMismatch:
          type: boolean
        strength:
          type: string
          x-nullable: true
        wasUsedDaysAgo:
          format: int64
          type: integer
        incorrectAnswers:
          items:
            type: string
          type: array
        requiresMoreAnswers:
          type: boolean
        questionsNotFound:
          items:
            type: string
          type: array
        invalidAnswers:
          additionalProperties:
            $ref: '#/components/schemas/AnswerErr'
          type: object
        tooManyAnswers:
          type: boolean
        waitTimeMs:
          format: int32
          type: integer
          x-nullable: true
        waitTimeSeconds:
          format: int32
          type: integer
          x-nullable: true
        waitTimeMinutes:
          format: int32
          type: integer
          x-nullable: true
        expiredAt:
          format: int64
          type: integer
          x-nullable: true
        loginId:
          $ref: '#/components/schemas/LoginId'
      required:
      - code
      - devMsg
      type: object
      x-order: 2025349183-4
      x-sealed: false
      x-super: '#/components/schemas/Err'
    CodeIsExpired:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-6
      x-super: '#/components/schemas/ClientErr'
    CodeIsIncorrect:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-8
      x-super: '#/components/schemas/ClientErr'
    CodeTooManyAttempts:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-7
      x-super: '#/components/schemas/ClientErr'
    EmailIsIncorrect:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -1279700867-5
      x-super: '#/components/schemas/ClientErr'
    Instant:
      format: int64
      type: integer
    IntegrationErr:
      additionalProperties: true
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: 2025349183-3
      x-sealed: false
      x-super: '#/components/schemas/Err'
    IpNew:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -1279700867-6
      x-super: '#/components/schemas/ClientErr'
    LoginId:
      example:
        type: type
        login: login
      properties:
        type:
          description: Type of login
          type: string
        login:
          description: "User unique identifier, email, username, etc."
          type: string
      required:
      - login
      - type
      type: object
      x-order: -2010674509-2
    NoAuthAvailableForFactor:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-4
      x-super: '#/components/schemas/IntegrationErr'
    PasswordIsIncorrect:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
        changedAt:
          format: int64
          type: integer
          x-nullable: true
        changedDaysAgo:
          format: int64
          type: integer
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -1279700867-3
      x-super: '#/components/schemas/ClientErr'
    PasswordIsInvalid:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
        tooLong:
          type: boolean
        tooShort:
          type: boolean
        missingNumber:
          type: boolean
        missingSymbol:
          type: boolean
        missingUpperCase:
          type: boolean
        missingLowerCase:
          type: boolean
        commonPassword:
          type: boolean
        wasUsedBeforeAt:
          format: int64
          type: integer
          x-nullable: true
        matchesLogin:
          $ref: '#/components/schemas/LoginId'
        passwordsMismatch:
          type: boolean
        strength:
          type: string
          x-nullable: true
        wasUsedDaysAgo:
          format: int64
          type: integer
      required:
      - code
      - commonPassword
      - devMsg
      - missingLowerCase
      - missingNumber
      - missingSymbol
      - missingUpperCase
      - passwordsMismatch
      - tooLong
      - tooShort
      type: object
      x-order: -1279700867-4
      x-super: '#/components/schemas/ClientErr'
    PluginClientErr:
      additionalProperties: true
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -1279700867-2
      x-super: '#/components/schemas/ClientErr'
    PluginErr:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -1279700867-1
      x-super: '#/components/schemas/ServerErr'
    QuestionsAnswersIncorrect:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
        incorrectAnswers:
          items:
            type: string
          type: array
        requiresMoreAnswers:
          type: boolean
        questionsNotFound:
          items:
            type: string
          type: array
      required:
      - code
      - devMsg
      - incorrectAnswers
      - questionsNotFound
      - requiresMoreAnswers
      type: object
      x-order: -1279700867-7
      x-super: '#/components/schemas/ClientErr'
    QuestionsAnswersInvalid:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
        invalidAnswers:
          additionalProperties:
            $ref: '#/components/schemas/AnswerErr'
          type: object
        tooManyAnswers:
          type: boolean
      required:
      - code
      - devMsg
      - invalidAnswers
      - tooManyAnswers
      type: object
      x-order: -1279700867-8
      x-super: '#/components/schemas/ClientErr'
    ServerErr:
      additionalProperties: true
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: 2025349183-2
      x-sealed: false
      x-super: '#/components/schemas/Err'
    SessionExpired:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -2065236468-0
      x-super: '#/components/schemas/Unauthenticated'
    SignatureIsIncorrect:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -2065236468-3
      x-super: '#/components/schemas/ClientErr'
    TokenExpired:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
        expiredAt:
          format: int64
          type: integer
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-11
      x-super: '#/components/schemas/Unauthenticated'
    TooManyReqs:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
        waitTimeMs:
          format: int32
          type: integer
          x-nullable: true
        waitTimeSeconds:
          format: int32
          type: integer
          x-nullable: true
        waitTimeMinutes:
          format: int32
          type: integer
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-12
      x-super: '#/components/schemas/ClientErr'
    Unauthenticated:
      additionalProperties: true
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
        expiredAt:
          format: int64
          type: integer
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-9
      x-sealed: false
      x-super: '#/components/schemas/ClientErr'
    UserLoginAlreadyTaken:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -270554383-1
      x-super: '#/components/schemas/ClientErr'
    UserLoginIsInvalid:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
        loginId:
          $ref: '#/components/schemas/LoginId'
      required:
      - code
      - devMsg
      - loginId
      type: object
      x-order: -270554383-0
      x-super: '#/components/schemas/ClientErr'
    UserNotFound:
      properties:
        code:
          type: string
        devMsg:
          description: Message for developers.
          type: string
        msg:
          description: Localised message suitable for UI.
          type: string
          x-nullable: true
      required:
      - code
      - devMsg
      type: object
      x-order: -2065236468-2
      x-super: '#/components/schemas/Unauthenticated'
    RateLimiterState:
      example:
        burntQuota: 1.4658129805029452
        id:
          rateLimiter: rateLimiter
          window:
            start: 0
            end: 6
          user:
            ip: ip
            userId: userId
      properties:
        id:
          $ref: '#/components/schemas/RateLimiterStateId'
        burntQuota:
          format: double
          type: number
      required:
      - burntQuota
      - id
      type: object
      x-order: 328297103-0
    RateLimiterStateId:
      example:
        rateLimiter: rateLimiter
        window:
          start: 0
          end: 6
        user:
          ip: ip
          userId: userId
      properties:
        rateLimiter:
          type: string
        user:
          $ref: '#/components/schemas/RateLimiterUser'
        window:
          $ref: '#/components/schemas/TimeWindow'
      required:
      - rateLimiter
      - user
      - window
      type: object
      x-order: 328297103-2
    RateLimiterUser:
      example:
        ip: ip
        userId: userId
      properties:
        userId:
          type: string
          x-nullable: true
        ip:
          type: string
          x-nullable: true
      type: object
      x-order: 328297103-4
    TimeWindow:
      example:
        start: 0
        end: 6
      properties:
        start:
          format: int64
          type: integer
        end:
          format: int64
          type: integer
      required:
      - end
      - start
      type: object
      x-order: 328297103-6
    BurnQuotaReq:
      example:
        quota: 0.8008281904610115
      properties:
        quota:
          format: double
          type: number
      required:
      - quota
      type: object
      x-order: 1338599945-1
    AuthData:
      example:
        private:
          encodedIps:
            key: 1
          passwords:
          - createdAt: 5
            hash: hash
          - createdAt: 5
            hash: hash
          questions:
            key: questions
          changedAt: 5
        public:
          email: email
          questionsSavedAt:
            key: 6
          updatedAt: 0
        login: login
      properties:
        public:
          $ref: '#/components/schemas/AuthData_public'
        private:
          $ref: '#/components/schemas/AuthData_private'
        login:
          description: |-
            If authenticator supports identification, it provides login here. This can be email, phone number,
            facebook account id, etc.
          type: string
          x-nullable: true
      required:
      - private
      - public
      type: object
      x-order: 332570507-3
    AuthPrivateData:
      additionalProperties: true
      type: object
      x-order: 332570507-6
    AuthPublicData:
      additionalProperties: true
      type: object
      x-order: 332570507-4
    AuthRes:
      example:
        authData:
          private:
            encodedIps:
              key: 1
            passwords:
            - createdAt: 5
              hash: hash
            - createdAt: 5
              hash: hash
            questions:
              key: questions
            changedAt: 5
          public:
            email: email
            questionsSavedAt:
              key: 6
            updatedAt: 0
          login: login
        resData:
          emailSentTo: emailSentTo
          password: password
          answersSavedAt:
            questionsSavedAt:
              key: 0
          strength: strength
          correct:
            HOME_CITY: true
            MOTHER_NAME: false
          extractedData:
            key: ""
          ipEncoded: ipEncoded
          login: login
      properties:
        authData:
          $ref: '#/components/schemas/AuthRes_authData'
        resData:
          $ref: '#/components/schemas/AuthRes_resData'
      required:
      - authData
      type: object
      x-order: -1249106462-9
    AuthResData:
      additionalProperties: true
      type: object
      x-order: -1249106462-10
    EmailAuthResData:
      additionalProperties: true
      properties:
        emailSentTo:
          description: "Shows user email, that was used to send a code. Email will\
            \ be partially hidden."
          type: string
      type: object
      x-order: 1021533909-5
      x-super: '#/components/schemas/AuthResData'
    EmailPublicData:
      additionalProperties: true
      properties:
        email:
          description: User email.
          type: string
        updatedAt:
          description: Last time when email was changed.
          format: int64
          type: integer
      required:
      - email
      - updatedAt
      type: object
      x-order: 1021533909-2
      x-super: '#/components/schemas/AuthPublicData'
    IpAuthResData:
      additionalProperties: true
      properties:
        ipEncoded:
          type: string
      required:
      - ipEncoded
      type: object
      x-order: 2116983897-2
      x-super: '#/components/schemas/AuthResData'
    IpPrivateData:
      additionalProperties: true
      properties:
        encodedIps:
          additionalProperties:
            format: int64
            type: integer
          type: object
      type: object
      x-order: 2116983897-1
      x-super: '#/components/schemas/AuthPrivateData'
    NoAuthPrivateData:
      additionalProperties: true
      type: object
      x-order: 332570507-7
      x-super: '#/components/schemas/AuthPrivateData'
    NoAuthPublicData:
      additionalProperties: true
      type: object
      x-order: 332570507-5
      x-super: '#/components/schemas/AuthPublicData'
    OAuthPublicData:
      additionalProperties: true
      type: object
      x-order: -893636857-2
      x-super: '#/components/schemas/AuthPublicData'
    OAuthResData:
      additionalProperties: true
      properties:
        login:
          type: string
        extractedData:
          additionalProperties: true
          type: object
          x-order: -893636857-2
          x-super: '#/components/schemas/AuthPublicData'
      required:
      - extractedData
      - login
      type: object
      x-order: -893636857-4
      x-super: '#/components/schemas/AuthResData'
    Password:
      example:
        createdAt: 5
        hash: hash
      properties:
        hash:
          type: string
        createdAt:
          format: int64
          type: integer
      required:
      - createdAt
      - hash
      type: object
      x-order: 378192899-3
    PasswordHistory:
      additionalProperties: true
      properties:
        passwords:
          items:
            $ref: '#/components/schemas/Password'
          type: array
        changedAt:
          format: int64
          type: integer
          x-nullable: true
      type: object
      x-order: 378192899-0
      x-super: '#/components/schemas/AuthPrivateData'
    PasswordPublicData:
      additionalProperties: true
      properties:
        updatedAt:
          description: Time when password was updated last time.
          format: int64
          type: integer
      required:
      - updatedAt
      type: object
      x-order: -266447761-2
      x-super: '#/components/schemas/AuthPublicData'
    PasswordUpdateResData:
      additionalProperties: true
      properties:
        password:
          description: If password was generated by app this field contains generated
            password.
          type: string
        strength:
          description: Calculated strength of password. Null means that all checks
            failed.
          type: string
          x-nullable: true
      required:
      - password
      type: object
      x-order: -266447761-5
      x-super: '#/components/schemas/AuthResData'
    QuestionsAuthResData:
      additionalProperties: true
      properties:
        correct:
          additionalProperties:
            type: boolean
          description: |
            Shows is answer was correct.
          example:
            HOME_CITY: true
            MOTHER_NAME: false
          type: object
      required:
      - correct
      type: object
      x-order: -213229069-4
      x-super: '#/components/schemas/AuthResData'
    QuestionsPrivateData:
      additionalProperties: true
      properties:
        questions:
          additionalProperties:
            type: string
          type: object
      type: object
      x-order: -213229069-2
      x-super: '#/components/schemas/AuthPrivateData'
    QuestionsPublicData:
      additionalProperties: true
      properties:
        questionsSavedAt:
          additionalProperties:
            format: int64
            type: integer
          type: object
      type: object
      x-order: -213229069-1
      x-super: '#/components/schemas/AuthPublicData'
    QuestionsUpdateResData:
      additionalProperties: true
      properties:
        answersSavedAt:
          $ref: '#/components/schemas/AuthRes_resData_answersSavedAt'
      required:
      - answersSavedAt
      type: object
      x-order: -213229069-6
      x-super: '#/components/schemas/AuthResData'
    AppSecretReqData:
      additionalProperties: true
      properties:
        secret:
          type: string
      required:
      - secret
      type: object
      x-order: 791325901-2
      x-super: '#/components/schemas/AuthReqData'
    AuthReq:
      example:
        dryRunAuthResData:
          emailSentTo: emailSentTo
          password: password
          answersSavedAt:
            questionsSavedAt:
              key: 0
          strength: strength
          correct:
            HOME_CITY: true
            MOTHER_NAME: false
          extractedData:
            key: ""
          ipEncoded: ipEncoded
          login: login
        reqData:
          template: template
          password: password
          authorizationCode: authorizationCode
          answers:
            HOME_CITY: London
            MOTHER_NAME: null
          confirmPassword: confirmPassword
          secret: secret
          accessToken: accessToken
          email: email
        authData:
          private:
            encodedIps:
              key: 1
            passwords:
            - createdAt: 5
              hash: hash
            - createdAt: 5
              hash: hash
            questions:
              key: questions
            changedAt: 5
          public:
            email: email
            questionsSavedAt:
              key: 6
            updatedAt: 0
          login: login
        session:
          authenticated: true
          systemAccess: true
          signedInAt: 7
          userId: userId
          expiresAt: 1
          nextFactors:
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          entry: entry
          authenticatedBy:
            key: authenticatedBy
          newUser: true
          refreshedAt: 1
          id: id
          identifiedBy:
          - type: type
            login: login
          - type: type
            login: login
          unconfirmedAuths:
            key:
              sentCodes:
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
          device:
            browser: browser
            mobile: true
            userAgent: userAgent
            type: type
        ctx:
          headers:
            key: headers
          ip: ip
          lang: lang
          device:
            browser: browser
            mobile: true
            userAgent: userAgent
            type: type
        codeToSend:
          attemptsLeft: 7
          code: code
          codeHash: codeHash
          usedAttempts: 6
          validUntil: 1
          sentAt: 1
        user:
          signedUpAt: 2
          systemAccess: true
          auths:
            key:
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
              sentCodes:
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
          id: 2c24704f-198a-4bc4-9718-306ccc97bbdc
          logins:
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          factors:
          - factors
          - factors
          updatedAt: 4
      properties:
        dryRunAuthResData:
          $ref: '#/components/schemas/AuthReq_dryRunAuthResData'
        user:
          $ref: '#/components/schemas/AuthReq_user'
        session:
          $ref: '#/components/schemas/AuthReq_session'
        authData:
          $ref: '#/components/schemas/AuthReq_authData'
        codeToSend:
          $ref: '#/components/schemas/AuthReq_codeToSend'
        reqData:
          $ref: '#/components/schemas/AuthReq_reqData'
        ctx:
          $ref: '#/components/schemas/ReqCtx'
      required:
      - ctx
      - reqData
      type: object
      x-order: -1249106462-2
    AuthReqData:
      additionalProperties: true
      type: object
      x-order: -1249106462-4
    AuthUserCfg:
      example:
        data:
          private:
            encodedIps:
              key: 1
            passwords:
            - createdAt: 5
              hash: hash
            - createdAt: 5
              hash: hash
            questions:
              key: questions
            changedAt: 5
          public:
            email: email
            questionsSavedAt:
              key: 6
            updatedAt: 0
          login: login
        sentCodes:
        - code:
            attemptsLeft: 9
            codeHash: codeHash
            usedAttempts: 7
            validUntil: 2
            sentAt: 3
          data:
            private:
              encodedIps:
                key: 1
              passwords:
              - createdAt: 5
                hash: hash
              - createdAt: 5
                hash: hash
              questions:
                key: questions
              changedAt: 5
            public:
              email: email
              questionsSavedAt:
                key: 6
              updatedAt: 0
            login: login
        - code:
            attemptsLeft: 9
            codeHash: codeHash
            usedAttempts: 7
            validUntil: 2
            sentAt: 3
          data:
            private:
              encodedIps:
                key: 1
              passwords:
              - createdAt: 5
                hash: hash
              - createdAt: 5
                hash: hash
              questions:
                key: questions
              changedAt: 5
            public:
              email: email
              questionsSavedAt:
                key: 6
              updatedAt: 0
            login: login
      properties:
        data:
          $ref: '#/components/schemas/AuthData'
        sentCodes:
          description: |
            List of auths that wait for confirmation.
          items:
            $ref: '#/components/schemas/UnconfirmedAuthData'
          type: array
      type: object
      x-order: 332570507-0
    Code:
      properties:
        validUntil:
          format: int64
          type: integer
        usedAttempts:
          format: int32
          type: integer
        attemptsLeft:
          format: int32
          type: integer
        codeHash:
          type: string
        sentAt:
          format: int64
          type: integer
        code:
          type: string
      required:
      - attemptsLeft
      - code
      - codeHash
      - sentAt
      - usedAttempts
      - validUntil
      type: object
      x-order: -1249106462-3
    CodeVerifier:
      example:
        attemptsLeft: 9
        codeHash: codeHash
        usedAttempts: 7
        validUntil: 2
        sentAt: 3
      properties:
        validUntil:
          format: int64
          type: integer
        usedAttempts:
          format: int32
          type: integer
        attemptsLeft:
          format: int32
          type: integer
        codeHash:
          type: string
        sentAt:
          format: int64
          type: integer
      required:
      - attemptsLeft
      - codeHash
      - sentAt
      - usedAttempts
      - validUntil
      type: object
      x-order: 1113303910-0
    Device:
      example:
        browser: browser
        mobile: true
        userAgent: userAgent
        type: type
      properties:
        mobile:
          type: boolean
        type:
          type: string
          x-nullable: true
        browser:
          type: string
          x-nullable: true
        userAgent:
          type: string
      required:
      - mobile
      - userAgent
      type: object
      x-order: 1837614569-0
    EmailAuthReqData:
      additionalProperties: true
      properties:
        email:
          description: |-
            User email. If email is not null - auth allow identification by email (email auth also must be listed in
            logins config). Otherwise, uses email of already identified user.
          type: string
          x-nullable: true
        template:
          description: Template to use.
          type: string
          x-nullable: true
      type: object
      x-order: 1021533909-3
      x-super: '#/components/schemas/AuthReqData'
    EmailUpdateReqData:
      additionalProperties: true
      properties:
        email:
          description: New email to set.
          type: string
        template:
          description: Template to use.
          type: string
          x-nullable: true
      required:
      - email
      type: object
      x-order: 1021533909-4
      x-super: '#/components/schemas/AuthReqData'
    Login:
      example:
        unconfirmedLogin: unconfirmedLogin
        type: type
        login: login
      properties:
        type:
          description: Type of login
          type: string
        login:
          description: "User unique identifier, email, username, etc."
          type: string
        unconfirmedLogin:
          type: string
          x-nullable: true
      required:
      - login
      - type
      type: object
      x-order: -2010674509-0
    NextFactor:
      example:
        supportedAuths:
        - supportedAuths
        - supportedAuths
        factor: factor
      properties:
        factor:
          type: string
        supportedAuths:
          items:
            type: string
          type: array
          uniqueItems: true
      required:
      - factor
      - supportedAuths
      type: object
      x-order: 1296788734-0
    NoAuthReqData:
      additionalProperties: true
      type: object
      x-order: -1249106462-5
      x-super: '#/components/schemas/AuthReqData'
    OAuthReqData:
      additionalProperties: true
      properties:
        accessToken:
          description: If you have access-token - put it here.
          type: string
          x-nullable: true
        authorizationCode:
          description: If you have authorisation-code - app will exchange it for access-token.
          type: string
          x-nullable: true
      type: object
      x-order: -893636857-3
      x-super: '#/components/schemas/AuthReqData'
    PasswordAuthReqData:
      additionalProperties: true
      properties:
        password:
          description: User password.
          type: string
      required:
      - password
      type: object
      x-order: -266447761-3
      x-super: '#/components/schemas/AuthReqData'
    PasswordUpdateReqData:
      additionalProperties: true
      properties:
        password:
          description: New password to set. If null app generates password automatically.
          type: string
          x-nullable: true
        confirmPassword:
          description: Password confirmation. If null app doesn't perform this check.
          type: string
          x-nullable: true
      type: object
      x-order: -266447761-4
      x-super: '#/components/schemas/AuthReqData'
    QuestionsAuthReqData:
      additionalProperties: true
      properties:
        answers:
          additionalProperties:
            type: string
          description: |
            Given answers for questions.
          example:
            HOME_CITY: New-York
            MOTHER_NAME: Emma
          type: object
      required:
      - answers
      type: object
      x-order: -213229069-3
      x-super: '#/components/schemas/AuthReqData'
    QuestionsUpdateReqData:
      additionalProperties: true
      properties:
        answers:
          additionalProperties:
            type: string
          description: |
            Answers to save. `null` as value removes answer
          example:
            HOME_CITY: London
            MOTHER_NAME: null
          type: object
      required:
      - answers
      type: object
      x-order: -213229069-5
      x-super: '#/components/schemas/AuthReqData'
    ReqCtx:
      example:
        headers:
          key: headers
        ip: ip
        lang: lang
        device:
          browser: browser
          mobile: true
          userAgent: userAgent
          type: type
      properties:
        lang:
          type: string
          x-nullable: true
        ip:
          type: string
        device:
          $ref: '#/components/schemas/Device'
        headers:
          additionalProperties:
            type: string
          type: object
      required:
      - device
      - headers
      - ip
      type: object
      x-order: -418366826-0
    Session:
      example:
        authenticated: true
        systemAccess: true
        signedInAt: 0
        userId: userId
        expiresAt: 6
        nextFactors:
        - supportedAuths:
          - supportedAuths
          - supportedAuths
          factor: factor
        - supportedAuths:
          - supportedAuths
          - supportedAuths
          factor: factor
        entry: entry
        authenticatedBy:
          key: authenticatedBy
        newUser: true
        refreshedAt: 1
        id: id
        identifiedBy:
        - type: type
          login: login
        - type: type
          login: login
        unconfirmedAuths:
          key:
            sentCodes:
            - attemptsLeft: 9
              codeHash: codeHash
              usedAttempts: 7
              validUntil: 2
              sentAt: 3
            - attemptsLeft: 9
              codeHash: codeHash
              usedAttempts: 7
              validUntil: 2
              sentAt: 3
        device:
          browser: browser
          mobile: true
          userAgent: userAgent
          type: type
      properties:
        id:
          type: string
        entry:
          description: Entry that authenticates this session
          type: string
        identifiedBy:
          description: Login used to identify this user
          items:
            $ref: '#/components/schemas/LoginId'
          type: array
        userId:
          type: string
          x-nullable: true
        authenticatedBy:
          additionalProperties:
            type: string
            x-additionalPropertiesName: factor
          description: |
            Authenticator used for factors
          type: object
        unconfirmedAuths:
          additionalProperties:
            $ref: '#/components/schemas/UnconfirmedAuth'
          description: |
            Auths that waiting for confirmation
          type: object
        nextFactors:
          description: List of factors needed to authenticate this session
          items:
            $ref: '#/components/schemas/NextFactor'
          type: array
        signedInAt:
          format: int64
          type: integer
        expiresAt:
          format: int64
          type: integer
        refreshedAt:
          format: int64
          type: integer
        newUser:
          type: boolean
        device:
          $ref: '#/components/schemas/Device'
        systemAccess:
          type: boolean
        authenticated:
          type: boolean
      required:
      - authenticatedBy
      - device
      - entry
      - expiresAt
      - id
      - identifiedBy
      - newUser
      - nextFactors
      - refreshedAt
      - signedInAt
      - systemAccess
      - unconfirmedAuths
      type: object
      x-order: 2013237977-0
    UnconfirmedAuth:
      example:
        sentCodes:
        - attemptsLeft: 9
          codeHash: codeHash
          usedAttempts: 7
          validUntil: 2
          sentAt: 3
        - attemptsLeft: 9
          codeHash: codeHash
          usedAttempts: 7
          validUntil: 2
          sentAt: 3
      properties:
        sentCodes:
          items:
            $ref: '#/components/schemas/CodeVerifier'
          type: array
      type: object
      x-order: 320227009-0
    UnconfirmedAuthData:
      example:
        code:
          attemptsLeft: 9
          codeHash: codeHash
          usedAttempts: 7
          validUntil: 2
          sentAt: 3
        data:
          private:
            encodedIps:
              key: 1
            passwords:
            - createdAt: 5
              hash: hash
            - createdAt: 5
              hash: hash
            questions:
              key: questions
            changedAt: 5
          public:
            email: email
            questionsSavedAt:
              key: 6
            updatedAt: 0
          login: login
      properties:
        data:
          $ref: '#/components/schemas/AuthData'
        code:
          $ref: '#/components/schemas/CodeVerifier'
      required:
      - code
      - data
      type: object
      x-order: 332570507-8
    User:
      example:
        signedUpAt: 0
        systemAccess: true
        auths:
          key:
            data:
              private:
                encodedIps:
                  key: 1
                passwords:
                - createdAt: 5
                  hash: hash
                - createdAt: 5
                  hash: hash
                questions:
                  key: questions
                changedAt: 5
              public:
                email: email
                questionsSavedAt:
                  key: 6
                updatedAt: 0
              login: login
            sentCodes:
            - code:
                attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
            - code:
                attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
        id: 2c24704f-198a-4bc4-9718-306ccc97bbdc
        logins:
        - unconfirmedLogin: unconfirmedLogin
          type: type
          login: login
        - unconfirmedLogin: unconfirmedLogin
          type: type
          login: login
        factors:
        - factors
        - factors
        updatedAt: 6
      properties:
        id:
          description: |
            Generated user uuid
          example: 2c24704f-198a-4bc4-9718-306ccc97bbdc
          type: string
        logins:
          items:
            $ref: '#/components/schemas/Login'
          type: array
        auths:
          additionalProperties:
            $ref: '#/components/schemas/AuthUserCfg'
          description: |
            Public data of confirmed auths and sent codes for unconfirmed auths.
          type: object
        factors:
          description: Enabled factors
          items:
            type: string
          type: array
          uniqueItems: true
        signedUpAt:
          format: int64
          type: integer
        updatedAt:
          format: int64
          type: integer
        systemAccess:
          description: Allows to access to any user in the app.
          type: boolean
      required:
      - auths
      - factors
      - id
      - logins
      - signedUpAt
      - updatedAt
      type: object
      x-order: 276900135-0
    DryRunAuthData:
      properties:
        login:
          description: |-
            If authenticator supports identification, it provides login here. This can be email, phone number,
            facebook account id, etc.
          type: string
          x-nullable: true
      type: object
      x-order: -1249106462-8
    DryRunAuthRes:
      example:
        authData:
          login: login
        resData:
          emailSentTo: emailSentTo
          password: password
          answersSavedAt:
            questionsSavedAt:
              key: 0
          strength: strength
          correct:
            HOME_CITY: true
            MOTHER_NAME: false
          extractedData:
            key: ""
          ipEncoded: ipEncoded
          login: login
      properties:
        authData:
          $ref: '#/components/schemas/DryRunAuthRes_authData'
        resData:
          $ref: '#/components/schemas/AuthRes_resData'
      type: object
      x-order: -1249106462-7
    FindSessionRes:
      example:
        session:
          authenticated: true
          systemAccess: true
          signedInAt: 0
          userId: userId
          expiresAt: 6
          nextFactors:
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          entry: entry
          authenticatedBy:
            key: authenticatedBy
          newUser: true
          refreshedAt: 1
          id: id
          identifiedBy:
          - type: type
            login: login
          - type: type
            login: login
          unconfirmedAuths:
            key:
              sentCodes:
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
          device:
            browser: browser
            mobile: true
            userAgent: userAgent
            type: type
      properties:
        session:
          $ref: '#/components/schemas/Session'
      type: object
      x-order: 400707106-2
    FindSessionsRes:
      example:
        sessions:
        - authenticated: true
          systemAccess: true
          signedInAt: 0
          userId: userId
          expiresAt: 6
          nextFactors:
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          entry: entry
          authenticatedBy:
            key: authenticatedBy
          newUser: true
          refreshedAt: 1
          id: id
          identifiedBy:
          - type: type
            login: login
          - type: type
            login: login
          unconfirmedAuths:
            key:
              sentCodes:
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
          device:
            browser: browser
            mobile: true
            userAgent: userAgent
            type: type
        - authenticated: true
          systemAccess: true
          signedInAt: 0
          userId: userId
          expiresAt: 6
          nextFactors:
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          entry: entry
          authenticatedBy:
            key: authenticatedBy
          newUser: true
          refreshedAt: 1
          id: id
          identifiedBy:
          - type: type
            login: login
          - type: type
            login: login
          unconfirmedAuths:
            key:
              sentCodes:
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
          device:
            browser: browser
            mobile: true
            userAgent: userAgent
            type: type
        tooManySessions: true
      properties:
        sessions:
          items:
            $ref: '#/components/schemas/Session'
          type: array
        tooManySessions:
          description: True if number of sessions in database exceeds some limit
          type: boolean
      required:
      - sessions
      type: object
      x-order: 400707106-4
    SaveSessionReq:
      example:
        new:
          authenticated: true
          systemAccess: true
          signedInAt: 5
          userId: userId
          expiresAt: 5
          nextFactors:
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          entry: entry
          authenticatedBy:
            key: authenticatedBy
          newUser: true
          refreshedAt: 2
          id: id
          identifiedBy:
          - type: type
            login: login
          - type: type
            login: login
          unconfirmedAuths:
            key:
              sentCodes:
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
          device:
            browser: browser
            mobile: true
            userAgent: userAgent
            type: type
        removed:
        - removed
        - removed
        userId: userId
        updated:
          authenticated: true
          systemAccess: true
          signedInAt: 0
          userId: userId
          expiresAt: 6
          nextFactors:
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          - supportedAuths:
            - supportedAuths
            - supportedAuths
            factor: factor
          entry: entry
          authenticatedBy:
            key: authenticatedBy
          newUser: true
          refreshedAt: 1
          id: id
          identifiedBy:
          - type: type
            login: login
          - type: type
            login: login
          unconfirmedAuths:
            key:
              sentCodes:
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
              - attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
          device:
            browser: browser
            mobile: true
            userAgent: userAgent
            type: type
      properties:
        userId:
          type: string
          x-nullable: true
        updated:
          $ref: '#/components/schemas/SaveSessionReq_updated'
        new:
          $ref: '#/components/schemas/SaveSessionReq_new'
        removed:
          description: Session ids to remove
          items:
            type: string
          type: array
      required:
      - removed
      type: object
      x-order: 400707106-3
    FindUserRes:
      example:
        user:
          signedUpAt: 0
          systemAccess: true
          auths:
            key:
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
              sentCodes:
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
          id: 2c24704f-198a-4bc4-9718-306ccc97bbdc
          logins:
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          factors:
          - factors
          - factors
          updatedAt: 6
      properties:
        user:
          $ref: '#/components/schemas/User'
      type: object
      x-order: -1537032784-1
    SaveUserReq:
      example:
        newUsers:
        - signedUpAt: 0
          systemAccess: true
          auths:
            key:
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
              sentCodes:
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
          id: 2c24704f-198a-4bc4-9718-306ccc97bbdc
          logins:
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          factors:
          - factors
          - factors
          updatedAt: 6
        - signedUpAt: 0
          systemAccess: true
          auths:
            key:
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
              sentCodes:
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
          id: 2c24704f-198a-4bc4-9718-306ccc97bbdc
          logins:
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          factors:
          - factors
          - factors
          updatedAt: 6
        updatedUsersOrLogins:
        - signedUpAt: 0
          systemAccess: true
          auths:
            key:
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
              sentCodes:
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
          id: 2c24704f-198a-4bc4-9718-306ccc97bbdc
          logins:
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          factors:
          - factors
          - factors
          updatedAt: 6
        - signedUpAt: 0
          systemAccess: true
          auths:
            key:
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
              sentCodes:
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
          id: 2c24704f-198a-4bc4-9718-306ccc97bbdc
          logins:
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          factors:
          - factors
          - factors
          updatedAt: 6
        newLogins:
        - unconfirmedLogin: unconfirmedLogin
          type: type
          login: login
        - unconfirmedLogin: unconfirmedLogin
          type: type
          login: login
        updatedLogins:
        - unconfirmedLogin: unconfirmedLogin
          type: type
          login: login
        - unconfirmedLogin: unconfirmedLogin
          type: type
          login: login
        removedLogins:
        - type: type
          login: login
        - type: type
          login: login
        updatedUsers:
        - signedUpAt: 0
          systemAccess: true
          auths:
            key:
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
              sentCodes:
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
          id: 2c24704f-198a-4bc4-9718-306ccc97bbdc
          logins:
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          factors:
          - factors
          - factors
          updatedAt: 6
        - signedUpAt: 0
          systemAccess: true
          auths:
            key:
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
              sentCodes:
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
              - code:
                  attemptsLeft: 9
                  codeHash: codeHash
                  usedAttempts: 7
                  validUntil: 2
                  sentAt: 3
                data:
                  private:
                    encodedIps:
                      key: 1
                    passwords:
                    - createdAt: 5
                      hash: hash
                    - createdAt: 5
                      hash: hash
                    questions:
                      key: questions
                    changedAt: 5
                  public:
                    email: email
                    questionsSavedAt:
                      key: 6
                    updatedAt: 0
                  login: login
          id: 2c24704f-198a-4bc4-9718-306ccc97bbdc
          logins:
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          - unconfirmedLogin: unconfirmedLogin
            type: type
            login: login
          factors:
          - factors
          - factors
          updatedAt: 6
      properties:
        removedLogins:
          description: Login ids to remove.
          items:
            $ref: '#/components/schemas/LoginId'
          type: array
        updatedUsers:
          description: User that must be updated. This list doesn't include users
            that have new/updated/removed logins only.
          items:
            $ref: '#/components/schemas/User'
          type: array
        newUsers:
          description: Users to insert
          items:
            $ref: '#/components/schemas/User'
          type: array
        updatedLogins:
          description: Logins to update
          items:
            $ref: '#/components/schemas/Login'
          type: array
        newLogins:
          description: Logins to insert
          items:
            $ref: '#/components/schemas/Login'
          type: array
        updatedUsersOrLogins:
          description: "Alternative field, if users and logins stored withing single\
            \ document - prefer this field + `newUsers`"
          items:
            $ref: '#/components/schemas/User'
          type: array
      required:
      - newLogins
      - newUsers
      - removedLogins
      - updatedLogins
      - updatedUsers
      - updatedUsersOrLogins
      type: object
      x-order: -1537032784-2
    UnauthenticatedCode:
      enum:
      - SESSION_EXPIRED
      - ACCESS_DENIED
      - USER_NOT_FOUND
      - TOKEN_EXPIRED
      - UNAUTHENTICATED
      type: string
    ClientErrCode:
      enum:
      - PLUGIN_CLIENT_ERR
      - PASSWORD_IS_INCORRECT
      - PASSWORD_IS_INVALID
      - EMAIL_IS_INCORRECT
      - IP_NEW
      - QUESTIONS_ANSWERS_INCORRECT
      - QUESTIONS_ANSWERS_INVALID
      - SESSION_EXPIRED
      - ACCESS_DENIED
      - USER_NOT_FOUND
      - SIGNATURE_IS_INCORRECT
      - USER_LOGIN_IS_INVALID
      - USER_LOGIN_ALREADY_TAKEN
      - TOKEN_EXPIRED
      - TOO_MANY_REQS
      - AUTH_IS_NOT_ENABLED
      - AUTH_IS_NOT_CONFIRMED
      - AUTH_REQUIRES_ANOTHER
      - CODE_IS_EXPIRED
      - CODE_TOO_MANY_ATTEMPTS
      - CODE_IS_INCORRECT
      - UNAUTHENTICATED
      type: string
    IntegrationErrCode:
      enum:
      - NO_AUTH_AVAILABLE_FOR_FACTOR
      - INTEGRATION_ERR
      type: string
    ServerErrCode:
      enum:
      - SERVER_ERR
      - PLUGIN_ERR
      type: string
    ErrCode:
      enum:
      - PLUGIN_ERR
      - PLUGIN_CLIENT_ERR
      - PASSWORD_IS_INCORRECT
      - PASSWORD_IS_INVALID
      - EMAIL_IS_INCORRECT
      - IP_NEW
      - QUESTIONS_ANSWERS_INCORRECT
      - QUESTIONS_ANSWERS_INVALID
      - SESSION_EXPIRED
      - ACCESS_DENIED
      - USER_NOT_FOUND
      - SIGNATURE_IS_INCORRECT
      - USER_LOGIN_IS_INVALID
      - USER_LOGIN_ALREADY_TAKEN
      - TOKEN_EXPIRED
      - TOO_MANY_REQS
      - AUTH_IS_NOT_ENABLED
      - AUTH_IS_NOT_CONFIRMED
      - NO_AUTH_AVAILABLE_FOR_FACTOR
      - AUTH_REQUIRES_ANOTHER
      - CODE_IS_EXPIRED
      - CODE_TOO_MANY_ATTEMPTS
      - CODE_IS_INCORRECT
      - UNAUTHENTICATED
      - SERVER_ERR
      - INTEGRATION_ERR
      - ANY_ERR
      type: string
    AuthData_public:
      additionalProperties: true
      example:
        email: email
        questionsSavedAt:
          key: 6
        updatedAt: 0
      properties:
        email:
          description: User email.
          type: string
        updatedAt:
          description: Time when password was updated last time.
          format: int64
          type: integer
        questionsSavedAt:
          additionalProperties:
            format: int64
            type: integer
          type: object
      type: object
    AuthData_private:
      additionalProperties: true
      example:
        encodedIps:
          key: 1
        passwords:
        - createdAt: 5
          hash: hash
        - createdAt: 5
          hash: hash
        questions:
          key: questions
        changedAt: 5
      properties:
        encodedIps:
          additionalProperties:
            format: int64
            type: integer
          type: object
        passwords:
          items:
            $ref: '#/components/schemas/Password'
          type: array
        changedAt:
          format: int64
          type: integer
          x-nullable: true
        questions:
          additionalProperties:
            type: string
          type: object
      type: object
    AuthRes_authData:
      description: New auth data to save
      example:
        private:
          encodedIps:
            key: 1
          passwords:
          - createdAt: 5
            hash: hash
          - createdAt: 5
            hash: hash
          questions:
            key: questions
          changedAt: 5
        public:
          email: email
          questionsSavedAt:
            key: 6
          updatedAt: 0
        login: login
      properties:
        public:
          $ref: '#/components/schemas/AuthData_public'
        private:
          $ref: '#/components/schemas/AuthData_private'
        login:
          description: |-
            If authenticator supports identification, it provides login here. This can be email, phone number,
            facebook account id, etc.
          type: string
          x-nullable: true
      required:
      - private
      - public
      type: object
      x-super: '#/components/schemas/AuthData'
    AuthRes_resData_answersSavedAt:
      description: Date of last update
      example:
        questionsSavedAt:
          key: 0
      properties:
        questionsSavedAt:
          additionalProperties:
            format: int64
            type: integer
          type: object
      type: object
      x-super: '#/components/schemas/QuestionsPublicData'
    AuthRes_resData:
      additionalProperties: true
      description: This data will be sent back to the client.
      example:
        emailSentTo: emailSentTo
        password: password
        answersSavedAt:
          questionsSavedAt:
            key: 0
        strength: strength
        correct:
          HOME_CITY: true
          MOTHER_NAME: false
        extractedData:
          key: ""
        ipEncoded: ipEncoded
        login: login
      properties:
        emailSentTo:
          description: "Shows user email, that was used to send a code. Email will\
            \ be partially hidden."
          type: string
        ipEncoded:
          type: string
        login:
          type: string
        extractedData:
          additionalProperties: true
          type: object
          x-order: -893636857-2
          x-super: '#/components/schemas/AuthPublicData'
        password:
          description: If password was generated by app this field contains generated
            password.
          type: string
        strength:
          description: Calculated strength of password. Null means that all checks
            failed.
          type: string
          x-nullable: true
        correct:
          additionalProperties:
            type: boolean
          description: |
            Shows is answer was correct.
          example:
            HOME_CITY: true
            MOTHER_NAME: false
          type: object
        answersSavedAt:
          $ref: '#/components/schemas/AuthRes_resData_answersSavedAt'
      type: object
      x-nullable: true
    AuthReq_dryRunAuthResData:
      additionalProperties: true
      description: Response provided by dry-run execution
      example:
        emailSentTo: emailSentTo
        password: password
        answersSavedAt:
          questionsSavedAt:
            key: 0
        strength: strength
        correct:
          HOME_CITY: true
          MOTHER_NAME: false
        extractedData:
          key: ""
        ipEncoded: ipEncoded
        login: login
      properties:
        emailSentTo:
          description: "Shows user email, that was used to send a code. Email will\
            \ be partially hidden."
          type: string
        ipEncoded:
          type: string
        login:
          type: string
        extractedData:
          additionalProperties: true
          type: object
          x-order: -893636857-2
          x-super: '#/components/schemas/AuthPublicData'
        password:
          description: If password was generated by app this field contains generated
            password.
          type: string
        strength:
          description: Calculated strength of password. Null means that all checks
            failed.
          type: string
          x-nullable: true
        correct:
          additionalProperties:
            type: boolean
          description: |
            Shows is answer was correct.
          example:
            HOME_CITY: true
            MOTHER_NAME: false
          type: object
        answersSavedAt:
          $ref: '#/components/schemas/AuthRes_resData_answersSavedAt'
      type: object
      x-nullable: true
    AuthReq_user:
      description: User loaded from database. Can be null if user isn't identified
        yet.
      example:
        signedUpAt: 2
        systemAccess: true
        auths:
          key:
            data:
              private:
                encodedIps:
                  key: 1
                passwords:
                - createdAt: 5
                  hash: hash
                - createdAt: 5
                  hash: hash
                questions:
                  key: questions
                changedAt: 5
              public:
                email: email
                questionsSavedAt:
                  key: 6
                updatedAt: 0
              login: login
            sentCodes:
            - code:
                attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
            - code:
                attemptsLeft: 9
                codeHash: codeHash
                usedAttempts: 7
                validUntil: 2
                sentAt: 3
              data:
                private:
                  encodedIps:
                    key: 1
                  passwords:
                  - createdAt: 5
                    hash: hash
                  - createdAt: 5
                    hash: hash
                  questions:
                    key: questions
                  changedAt: 5
                public:
                  email: email
                  questionsSavedAt:
                    key: 6
                  updatedAt: 0
                login: login
        id: 2c24704f-198a-4bc4-9718-306ccc97bbdc
        logins:
        - unconfirmedLogin: unconfirmedLogin
          type: type
          login: login
        - unconfirmedLogin: unconfirmedLogin
          type: type
          login: login
        factors:
        - factors
        - factors
        updatedAt: 4
      properties:
        id:
          description: |
            Generated user uuid
          example: 2c24704f-198a-4bc4-9718-306ccc97bbdc
          type: string
        logins:
          items:
            $ref: '#/components/schemas/Login'
          type: array
        auths:
          additionalProperties:
            $ref: '#/components/schemas/AuthUserCfg'
          description: |
            Public data of confirmed auths and sent codes for unconfirmed auths.
          type: object
        factors:
          description: Enabled factors
          items:
            type: string
          type: array
          uniqueItems: true
        signedUpAt:
          format: int64
          type: integer
        updatedAt:
          format: int64
          type: integer
        systemAccess:
          description: Allows to access to any user in the app.
          type: boolean
      required:
      - auths
      - factors
      - id
      - logins
      - signedUpAt
      - updatedAt
      type: object
      x-nullable: true
      x-super: '#/components/schemas/User'
    AuthReq_session:
      description: "Current session, can be null if user edited by admin."
      example:
        authenticated: true
        systemAccess: true
        signedInAt: 7
        userId: userId
        expiresAt: 1
        nextFactors:
        - supportedAuths:
          - supportedAuths
          - supportedAuths
          factor: factor
        - supportedAuths:
          - supportedAuths
          - supportedAuths
          factor: factor
        entry: entry
        authenticatedBy:
          key: authenticatedBy
        newUser: true
        refreshedAt: 1
        id: id
        identifiedBy:
        - type: type
          login: login
        - type: type
          login: login
        unconfirmedAuths:
          key:
            sentCodes:
            - attemptsLeft: 9
              codeHash: codeHash
              usedAttempts: 7
              validUntil: 2
              sentAt: 3
            - attemptsLeft: 9
              codeHash: codeHash
              usedAttempts: 7
              validUntil: 2
              sentAt: 3
        device:
          browser: browser
          mobile: true
          userAgent: userAgent
          type: type
      properties:
        id:
          type: string
        entry:
          description: Entry that authenticates this session
          type: string
        identifiedBy:
          description: Login used to identify this user
          items:
            $ref: '#/components/schemas/LoginId'
          type: array
        userId:
          type: string
          x-nullable: true
        authenticatedBy:
          additionalProperties:
            type: string
            x-additionalPropertiesName: factor
          description: |
            Authenticator used for factors
          type: object
        unconfirmedAuths:
          additionalProperties:
            $ref: '#/components/schemas/UnconfirmedAuth'
          description: |
            Auths that waiting for confirmation
          type: object
        nextFactors:
          description: List of factors needed to authenticate this session
          items:
            $ref: '#/components/schemas/NextFactor'
          type: array
        signedInAt:
          format: int64
          type: integer
        expiresAt:
          format: int64
          type: integer
        refreshedAt:
          format: int64
          type: integer
        newUser:
          type: boolean
        device:
          $ref: '#/components/schemas/Device'
        systemAccess:
          type: boolean
        authenticated:
          type: boolean
      required:
      - authenticatedBy
      - device
      - entry
      - expiresAt
      - id
      - identifiedBy
      - newUser
      - nextFactors
      - refreshedAt
      - signedInAt
      - systemAccess
      - unconfirmedAuths
      type: object
      x-nullable: true
      x-super: '#/components/schemas/Session'
    AuthReq_authData:
      description: |-
        Current session data. Null if auth wasn't enabled before. Otherwise, will contain current auth data during
        authenticate and previous data during update-auth request.
      example:
        private:
          encodedIps:
            key: 1
          passwords:
          - createdAt: 5
            hash: hash
          - createdAt: 5
            hash: hash
          questions:
            key: questions
          changedAt: 5
        public:
          email: email
          questionsSavedAt:
            key: 6
          updatedAt: 0
        login: login
      properties:
        public:
          $ref: '#/components/schemas/AuthData_public'
        private:
          $ref: '#/components/schemas/AuthData_private'
        login:
          description: |-
            If authenticator supports identification, it provides login here. This can be email, phone number,
            facebook account id, etc.
          type: string
          x-nullable: true
      required:
      - private
      - public
      type: object
      x-nullable: true
      x-super: '#/components/schemas/AuthData'
    AuthReq_codeToSend:
      description: Generated code. Will be null if no code-config specified.
      example:
        attemptsLeft: 7
        code: code
        codeHash: codeHash
        usedAttempts: 6
        validUntil: 1
        sentAt: 1
      properties:
        validUntil:
          format: int64
          type: integer
        usedAttempts:
          format: int32
          type: integer
        attemptsLeft:
          format: int32
          type: integer
        codeHash:
          type: string
        sentAt:
          format: int64
          type: integer
        code:
          type: string
      required:
      - attemptsLeft
      - code
      - codeHash
      - sentAt
      - usedAttempts
      - validUntil
      type: object
      x-nullable: true
      x-super: '#/components/schemas/Code'
    AuthReq_reqData:
      additionalProperties: true
      example:
        template: template
        password: password
        authorizationCode: authorizationCode
        answers:
          HOME_CITY: London
          MOTHER_NAME: null
        confirmPassword: confirmPassword
        secret: secret
        accessToken: accessToken
        email: email
      properties:
        secret:
          type: string
        email:
          description: New email to set.
          type: string
        template:
          description: Template to use.
          type: string
          x-nullable: true
        accessToken:
          description: If you have access-token - put it here.
          type: string
          x-nullable: true
        authorizationCode:
          description: If you have authorisation-code - app will exchange it for access-token.
          type: string
          x-nullable: true
        password:
          description: New password to set. If null app generates password automatically.
          type: string
          x-nullable: true
        confirmPassword:
          description: Password confirmation. If null app doesn't perform this check.
          type: string
          x-nullable: true
        answers:
          additionalProperties:
            type: string
          description: |
            Answers to save. `null` as value removes answer
          example:
            HOME_CITY: London
            MOTHER_NAME: null
          type: object
      type: object
    DryRunAuthRes_authData:
      description: New auth data to save
      example:
        login: login
      properties:
        login:
          description: |-
            If authenticator supports identification, it provides login here. This can be email, phone number,
            facebook account id, etc.
          type: string
          x-nullable: true
      type: object
      x-nullable: true
      x-super: '#/components/schemas/DryRunAuthData'
    SaveSessionReq_updated:
      description: Session to update.
      example:
        authenticated: true
        systemAccess: true
        signedInAt: 0
        userId: userId
        expiresAt: 6
        nextFactors:
        - supportedAuths:
          - supportedAuths
          - supportedAuths
          factor: factor
        - supportedAuths:
          - supportedAuths
          - supportedAuths
          factor: factor
        entry: entry
        authenticatedBy:
          key: authenticatedBy
        newUser: true
        refreshedAt: 1
        id: id
        identifiedBy:
        - type: type
          login: login
        - type: type
          login: login
        unconfirmedAuths:
          key:
            sentCodes:
            - attemptsLeft: 9
              codeHash: codeHash
              usedAttempts: 7
              validUntil: 2
              sentAt: 3
            - attemptsLeft: 9
              codeHash: codeHash
              usedAttempts: 7
              validUntil: 2
              sentAt: 3
        device:
          browser: browser
          mobile: true
          userAgent: userAgent
          type: type
      properties:
        id:
          type: string
        entry:
          description: Entry that authenticates this session
          type: string
        identifiedBy:
          description: Login used to identify this user
          items:
            $ref: '#/components/schemas/LoginId'
          type: array
        userId:
          type: string
          x-nullable: true
        authenticatedBy:
          additionalProperties:
            type: string
            x-additionalPropertiesName: factor
          description: |
            Authenticator used for factors
          type: object
        unconfirmedAuths:
          additionalProperties:
            $ref: '#/components/schemas/UnconfirmedAuth'
          description: |
            Auths that waiting for confirmation
          type: object
        nextFactors:
          description: List of factors needed to authenticate this session
          items:
            $ref: '#/components/schemas/NextFactor'
          type: array
        signedInAt:
          format: int64
          type: integer
        expiresAt:
          format: int64
          type: integer
        refreshedAt:
          format: int64
          type: integer
        newUser:
          type: boolean
        device:
          $ref: '#/components/schemas/Device'
        systemAccess:
          type: boolean
        authenticated:
          type: boolean
      required:
      - authenticatedBy
      - device
      - entry
      - expiresAt
      - id
      - identifiedBy
      - newUser
      - nextFactors
      - refreshedAt
      - signedInAt
      - systemAccess
      - unconfirmedAuths
      type: object
      x-nullable: true
      x-super: '#/components/schemas/Session'
    SaveSessionReq_new:
      description: Session to insert
      example:
        authenticated: true
        systemAccess: true
        signedInAt: 5
        userId: userId
        expiresAt: 5
        nextFactors:
        - supportedAuths:
          - supportedAuths
          - supportedAuths
          factor: factor
        - supportedAuths:
          - supportedAuths
          - supportedAuths
          factor: factor
        entry: entry
        authenticatedBy:
          key: authenticatedBy
        newUser: true
        refreshedAt: 2
        id: id
        identifiedBy:
        - type: type
          login: login
        - type: type
          login: login
        unconfirmedAuths:
          key:
            sentCodes:
            - attemptsLeft: 9
              codeHash: codeHash
              usedAttempts: 7
              validUntil: 2
              sentAt: 3
            - attemptsLeft: 9
              codeHash: codeHash
              usedAttempts: 7
              validUntil: 2
              sentAt: 3
        device:
          browser: browser
          mobile: true
          userAgent: userAgent
          type: type
      properties:
        id:
          type: string
        entry:
          description: Entry that authenticates this session
          type: string
        identifiedBy:
          description: Login used to identify this user
          items:
            $ref: '#/components/schemas/LoginId'
          type: array
        userId:
          type: string
          x-nullable: true
        authenticatedBy:
          additionalProperties:
            type: string
            x-additionalPropertiesName: factor
          description: |
            Authenticator used for factors
          type: object
        unconfirmedAuths:
          additionalProperties:
            $ref: '#/components/schemas/UnconfirmedAuth'
          description: |
            Auths that waiting for confirmation
          type: object
        nextFactors:
          description: List of factors needed to authenticate this session
          items:
            $ref: '#/components/schemas/NextFactor'
          type: array
        signedInAt:
          format: int64
          type: integer
        expiresAt:
          format: int64
          type: integer
        refreshedAt:
          format: int64
          type: integer
        newUser:
          type: boolean
        device:
          $ref: '#/components/schemas/Device'
        systemAccess:
          type: boolean
        authenticated:
          type: boolean
      required:
      - authenticatedBy
      - device
      - entry
      - expiresAt
      - id
      - identifiedBy
      - newUser
      - nextFactors
      - refreshedAt
      - signedInAt
      - systemAccess
      - unconfirmedAuths
      type: object
      x-nullable: true
      x-super: '#/components/schemas/Session'
x-tagGroups:
- name: Api
  tags:
  - plugin/auth
  - plugin/repo/user
  - plugin/repo/session
  - plugin/rate-limiter
