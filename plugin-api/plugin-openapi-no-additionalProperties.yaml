openapi: 3.0.1
info:
  title: Kntrl plugin API
  description: |+
    This is the API that Kntrl server uses for integration with plugins.
    To implement plugin you must add next http endpoints to your server

  version: 0.10.0
  x-logo:
    url: ./logo.png
tags:
- name: plugin/rate-limiter
  x-displayName:
  - Rate limiter API
- name: plugin/auth
  x-displayName:
  - Auth plugin API
- name: plugin/repo/session
  x-displayName:
  - Session repo API
- name: plugin/repo/user
  x-displayName:
  - User repo API
paths:
  /plugin/rate-limiter/{id}/burn-quota:
    post:
      tags:
      - plugin/rate-limiter
      description: |-
        Performs INCREMENT and GET operation.
        Adds `quota` amount to stored rate-limiter by limiter-id and returns it.
      operationId: burnQuota
      parameters:
      - name: id
        in: path
        required: true
        schema:
          $ref: '#/components/schemas/RateLimiterStateId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BurnQuotaReq'
        required: true
      responses:
        default:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RateLimiterState'
        "4XX":
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
        "5XX":
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
      x-order: 1
  /plugin/auth/authenticate/dry-run:
    post:
      tags:
      - plugin/auth
      summary: Authenticate dry-run
      description: |
        This is called before sign-in (or sign-up if user isn't identified). Performs validation of request.
      operationId: authenticateDryRun
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthReq'
        required: true
      responses:
        default:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DryRunAuthRes'
        "4XX":
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
        "5XX":
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
      x-order: 1
  /plugin/repository/session/{id}:
    get:
      tags:
      - plugin/repo/session
      summary: Find session by id
      description: |
        Find single session
      operationId: findSession
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        default:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindSessionRes'
        "4XX":
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
        "5XX":
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
      x-order: 1
  /plugin/repository/user:
    get:
      tags:
      - plugin/repo/user
      summary: Find user
      description: |
        Finds user by login.
      operationId: findUser
      parameters:
      - name: login-type
        in: query
        required: true
        schema:
          type: string
      - name: login
        in: query
        required: true
        schema:
          type: string
      responses:
        default:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindUserRes'
        "4XX":
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
        "5XX":
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
      x-order: 1
    post:
      tags:
      - plugin/repo/user
      summary: Find user
      description: |
        Saves users.
        Be careful with order. To avoid potential "duplicated entry" problem, remove operation goes firs,
        then update, then insert.
      operationId: saveUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveUserReq'
        required: true
      responses:
        default:
          description: Success
          content:
            application/json: {}
        "4XX":
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
        "5XX":
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
      x-order: 2
  /plugin/auth/authenticate:
    post:
      tags:
      - plugin/auth
      summary: Authenticate
      description: |
        Called during sign-in (or sign-up if user isn't identified).
      operationId: authenticate
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthReq'
        required: true
      responses:
        default:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthRes'
        "4XX":
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
        "5XX":
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
      security:
      - access-token: []
      x-order: 2
  /plugin/repository/session:
    get:
      tags:
      - plugin/repo/session
      summary: Find sessions
      description: |
        Find all user sessions
      operationId: findSessions
      parameters:
      - name: userId
        in: query
        required: true
        schema:
          type: string
      - name: entry
        in: query
        required: false
        schema:
          type: string
      responses:
        default:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindSessionsRes'
        "4XX":
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
        "5XX":
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
      x-order: 2
    post:
      tags:
      - plugin/repo/session
      summary: Save sessions
      description: |
        Save/update/remove sessions
      operationId: saveSession
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveSessionReq'
        required: true
      responses:
        default:
          description: Success
          content:
            application/json: {}
        "4XX":
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
        "5XX":
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
      x-order: 3
  /plugin/auth/update/dry-run:
    post:
      tags:
      - plugin/auth
      summary: Update auth dry-run
      description: |
        This is called before sign-up or auth enabling. Performs validation of request.
      operationId: updateAuthDryRun
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthReq'
        required: true
      responses:
        default:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DryRunAuthRes'
        "4XX":
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
        "5XX":
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
      x-order: 3
  /plugin/auth/update:
    post:
      tags:
      - plugin/auth
      summary: Update auth
      description: |
        This is called during sign-up or auth enabling.
      operationId: updateAuth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthReq'
        required: true
      responses:
        default:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthRes'
        "4XX":
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientErr'
        "5XX":
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationErr'
      x-order: 4
components:
  schemas:
    Err:
      type: object
      additionalProperties: true
      x-order: 2025349183-0
      x-sealed: false
      example: null
    AccessDenied:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -2065236468-1
      x-super: '#/components/schemas/Unauthenticated'
      example: null
    AnswerErr:
      required:
      - tooLong
      - tooShort
      type: object
      properties:
        tooShort:
          type: boolean
          example: null
        tooLong:
          type: boolean
          example: null
      x-order: -1279700867-9
      example: null
    AnyErr:
      type: object
      additionalProperties: true
      x-order: 2025349183-5
      x-super: '#/components/schemas/Err'
      example: null
    AuthIsNotConfirmed:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -270554383-3
      x-super: '#/components/schemas/ClientErr'
      example: null
    AuthIsNotEnabled:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -270554383-2
      x-super: '#/components/schemas/ClientErr'
      example: null
    AuthRequiresAnother:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -270554383-5
      x-super: '#/components/schemas/ClientErr'
      example: null
    ClientErr:
      type: object
      additionalProperties: true
      x-order: 2025349183-4
      x-sealed: false
      x-super: '#/components/schemas/Err'
      example: null
    CodeIsExpired:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -270554383-6
      x-super: '#/components/schemas/ClientErr'
      example: null
    CodeIsIncorrect:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -270554383-8
      x-super: '#/components/schemas/ClientErr'
      example: null
    CodeTooManyAttempts:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -270554383-7
      x-super: '#/components/schemas/ClientErr'
      example: null
    EmailIsIncorrect:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -1279700867-5
      x-super: '#/components/schemas/ClientErr'
      example: null
    IncorrectTotpCode:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -1279700867-10
      x-super: '#/components/schemas/ClientErr'
      example: null
    Instant:
      type: integer
      format: int64
    IntegrationErr:
      type: object
      additionalProperties: true
      x-order: 2025349183-3
      x-sealed: false
      x-super: '#/components/schemas/Err'
      example: null
    IpNew:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -1279700867-6
      x-super: '#/components/schemas/ClientErr'
      example: null
    LoginId:
      required:
      - login
      - type
      type: object
      properties:
        type:
          type: string
          description: |
            Type of login
          example: email
        login:
          type: string
          description: |
            User unique identifier, email, username, etc. User can use it to sign-in.
          example: john@example.org
      x-order: -2010674509-2
      example: null
    NoAuthAvailableForFactor:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -270554383-4
      x-super: '#/components/schemas/IntegrationErr'
      example: null
    OauthAppErr:
      required:
      - code
      - devMsg
      - incorrectRedirectUri
      - incorrectSecret
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
        incorrectRedirectUri:
          type: boolean
          example: null
        incorrectSecret:
          type: boolean
          example: null
      x-order: -1279700867-11
      x-super: '#/components/schemas/ClientErr'
      example: null
    PasswordIsIncorrect:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
        changedAt:
          type: integer
          format: int64
          x-nullable: true
          example: null
        changedDaysAgo:
          type: integer
          format: int64
          x-nullable: true
          example: null
      x-order: -1279700867-3
      x-super: '#/components/schemas/ClientErr'
      example: null
    PasswordIsInvalid:
      required:
      - code
      - commonPassword
      - devMsg
      - missingLowerCase
      - missingNumber
      - missingSymbol
      - missingUpperCase
      - passwordsMismatch
      - tooLong
      - tooShort
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
        tooLong:
          type: boolean
          example: null
        tooShort:
          type: boolean
          example: null
        missingNumber:
          type: boolean
          example: null
        missingSymbol:
          type: boolean
          example: null
        missingUpperCase:
          type: boolean
          example: null
        missingLowerCase:
          type: boolean
          example: null
        commonPassword:
          type: boolean
          example: null
        wasUsedBeforeAt:
          type: integer
          format: int64
          x-nullable: true
          example: null
        matchesLogin:
          $ref: '#/components/schemas/LoginId'
        passwordsMismatch:
          type: boolean
          example: null
        strength:
          type: string
          x-nullable: true
          example: null
        wasUsedDaysAgo:
          type: integer
          format: int64
          example: null
      x-order: -1279700867-4
      x-super: '#/components/schemas/ClientErr'
      example: null
    PluginClientErr:
      type: object
      additionalProperties: true
      x-order: -1279700867-2
      x-super: '#/components/schemas/ClientErr'
      example: null
    PluginErr:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -1279700867-1
      x-super: '#/components/schemas/ServerErr'
      example: null
    QuestionsAnswersIncorrect:
      required:
      - code
      - devMsg
      - incorrectAnswers
      - questionsNotFound
      - requiresMoreAnswers
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
        incorrectAnswers:
          type: array
          items:
            type: string
          example: null
        requiresMoreAnswers:
          type: boolean
          example: null
        questionsNotFound:
          type: array
          items:
            type: string
          example: null
      x-order: -1279700867-7
      x-super: '#/components/schemas/ClientErr'
      example: null
    QuestionsAnswersInvalid:
      required:
      - code
      - devMsg
      - invalidAnswers
      - tooManyAnswers
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
        invalidAnswers:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AnswerErr'
          example: null
        tooManyAnswers:
          type: boolean
          example: null
      x-order: -1279700867-8
      x-super: '#/components/schemas/ClientErr'
      example: null
    ServerErr:
      type: object
      additionalProperties: true
      x-order: 2025349183-2
      x-sealed: false
      x-super: '#/components/schemas/Err'
      example: null
    SessionExpired:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -2065236468-0
      x-super: '#/components/schemas/Unauthenticated'
      example: null
    TokenExpired:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
        expiredAt:
          type: integer
          description: |-
            Token expiration time. If null, token is incorrect (due to incorrect format or invalid signature).
            May be caused by changed app-secret.
          format: int64
          x-nullable: true
          example: null
      x-order: -270554383-11
      x-super: '#/components/schemas/Unauthenticated'
      example: null
    TooManyReqs:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
        waitTimeMs:
          type: integer
          format: int32
          x-nullable: true
          example: null
        waitTimeSeconds:
          type: integer
          format: int32
          x-nullable: true
          example: null
        waitTimeMinutes:
          type: integer
          format: int32
          x-nullable: true
          example: null
      x-order: -270554383-12
      x-super: '#/components/schemas/ClientErr'
      example: null
    Unauthenticated:
      type: object
      additionalProperties: true
      x-order: -270554383-9
      x-sealed: false
      x-super: '#/components/schemas/ClientErr'
      example: null
    UserLoginAlreadyTaken:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -270554383-1
      x-super: '#/components/schemas/ClientErr'
      example: null
    UserLoginIsInvalid:
      required:
      - code
      - devMsg
      - loginId
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
        loginId:
          $ref: '#/components/schemas/LoginId'
      x-order: -270554383-0
      x-super: '#/components/schemas/ClientErr'
      example: null
    UserNotFound:
      required:
      - code
      - devMsg
      type: object
      properties:
        code:
          type: string
          example: null
        devMsg:
          type: string
          description: Message for developers.
          example: null
        msg:
          type: string
          description: Localised message suitable for UI.
          x-nullable: true
          example: null
      x-order: -2065236468-2
      x-super: '#/components/schemas/Unauthenticated'
      example: null
    RateLimiterState:
      required:
      - burntQuota
      - id
      type: object
      properties:
        id:
          $ref: '#/components/schemas/RateLimiterStateId'
        burntQuota:
          type: number
          format: double
          example: null
      x-order: 328297103-0
      example: null
    RateLimiterStateId:
      required:
      - rateLimiter
      - user
      - window
      type: object
      properties:
        rateLimiter:
          type: string
          example: null
        user:
          $ref: '#/components/schemas/RateLimiterUser'
        window:
          $ref: '#/components/schemas/TimeWindow'
      x-order: 328297103-2
      example: null
    RateLimiterUser:
      type: object
      properties:
        userId:
          type: string
          x-nullable: true
          example: null
        ip:
          type: string
          x-nullable: true
          example: null
      x-order: 328297103-4
      example: null
    TimeWindow:
      required:
      - end
      - start
      type: object
      properties:
        start:
          type: integer
          format: int64
          example: null
        end:
          type: integer
          format: int64
          example: null
      x-order: 328297103-6
      example: null
    BurnQuotaReq:
      required:
      - quota
      type: object
      properties:
        quota:
          type: number
          format: double
          example: null
      x-order: 1338599945-1
      example: null
    AuthData:
      required:
      - private
      - public
      type: object
      properties:
        public:
          additionalProperties: true
        private:
          additionalProperties: true
        login:
          type: string
          description: |-
            If authenticator supports identification, it provides login here. This can be email, phone number,
            facebook account id, etc.
          x-nullable: true
          example: null
      x-order: 332570507-3
      example: null
    AuthPrivateData:
      type: object
      additionalProperties: true
      description: Data available only for authenticator.
      x-order: 332570507-6
      example: null
    AuthPublicData:
      type: object
      additionalProperties: true
      description: Data that are available for API.
      x-order: 332570507-4
      example: null
    AuthRes:
      required:
      - authData
      type: object
      properties:
        authData:
          required:
          - private
          - public
          type: object
          properties:
            public:
              additionalProperties: true
            private:
              additionalProperties: true
            login:
              type: string
              description: |-
                If authenticator supports identification, it provides login here. This can be email, phone number,
                facebook account id, etc.
              x-nullable: true
              example: null
          description: New auth data to save.
          x-super: '#/components/schemas/AuthData'
          example: null
        resData:
          additionalProperties: true
          description: This data will be sent back to the client.
          x-nullable: true
          example: null
        sessionData:
          additionalProperties: true
          description: Store any information in session.
          x-nullable: true
          example: null
      x-order: -1249106462-9
      example: null
    AuthResData:
      type: object
      additionalProperties: true
      x-order: -1249106462-10
      example: null
    AuthorizationCodeSessionData:
      type: object
      additionalProperties: true
      x-order: -1836982696-7
      x-super: '#/components/schemas/SessionData'
      example: null
    AuthorizationCodeUpdateResData:
      type: object
      additionalProperties: true
      x-order: -1836982696-5
      x-super: '#/components/schemas/AuthResData'
      example: null
    EmailAuthResData:
      type: object
      additionalProperties: true
      x-order: 1021533909-5
      x-super: '#/components/schemas/AuthResData'
      example: null
    EmailPublicData:
      type: object
      additionalProperties: true
      description: Data that are available for API.
      x-order: 1021533909-2
      x-super: '#/components/schemas/AuthPublicData'
      example: null
    IpAuthResData:
      type: object
      additionalProperties: true
      x-order: 2116983897-2
      x-super: '#/components/schemas/AuthResData'
      example: null
    IpPrivateData:
      type: object
      additionalProperties: true
      description: Data available only for authenticator.
      x-order: 2116983897-1
      x-super: '#/components/schemas/AuthPrivateData'
      example: null
    NoAuthPrivateData:
      type: object
      additionalProperties: true
      description: Data available only for authenticator.
      x-order: 332570507-7
      x-super: '#/components/schemas/AuthPrivateData'
      example: null
    NoAuthPublicData:
      type: object
      additionalProperties: true
      description: Data that are available for API.
      x-order: 332570507-5
      x-super: '#/components/schemas/AuthPublicData'
      example: null
    OAuthAppPrivateData:
      type: object
      additionalProperties: true
      description: Data available only for authenticator.
      x-order: -1247144074-3
      x-super: '#/components/schemas/AuthPrivateData'
      example: null
    OAuthAppPublicData:
      type: object
      additionalProperties: true
      description: Data that are available for API.
      x-order: -1247144074-2
      x-super: '#/components/schemas/AuthPublicData'
      example: null
    OAuthAppUpdateResData:
      type: object
      additionalProperties: true
      x-order: -1247144074-6
      x-super: '#/components/schemas/AuthResData'
      example: null
    OAuthPublicData:
      type: object
      additionalProperties: true
      description: Data that are available for API.
      x-order: -893636857-2
      example: null
    OAuthResData:
      type: object
      additionalProperties: true
      x-order: -893636857-5
      x-super: '#/components/schemas/AuthResData'
      example: null
    Password:
      required:
      - createdAt
      - hash
      type: object
      properties:
        hash:
          type: string
          example: null
        createdAt:
          type: integer
          format: int64
          example: null
      x-order: 378192899-3
      example: null
    PasswordHistory:
      type: object
      additionalProperties: true
      description: Data available only for authenticator.
      x-order: 378192899-0
      x-super: '#/components/schemas/AuthPrivateData'
      example: null
    PasswordPublicData:
      type: object
      additionalProperties: true
      description: Data that are available for API.
      x-order: -266447761-2
      x-super: '#/components/schemas/AuthPublicData'
      example: null
    PasswordUpdateResData:
      type: object
      additionalProperties: true
      x-order: -266447761-5
      x-super: '#/components/schemas/AuthResData'
      example: null
    QuestionsAuthResData:
      type: object
      additionalProperties: true
      x-order: -213229069-4
      x-super: '#/components/schemas/AuthResData'
      example: null
    QuestionsPrivateData:
      type: object
      additionalProperties: true
      description: Data available only for authenticator.
      x-order: -213229069-2
      x-super: '#/components/schemas/AuthPrivateData'
      example: null
    QuestionsPublicData:
      type: object
      additionalProperties: true
      description: Data that are available for API.
      x-order: -213229069-1
      x-super: '#/components/schemas/AuthPublicData'
      example: null
    QuestionsUpdateResData:
      type: object
      additionalProperties: true
      x-order: -213229069-6
      x-super: '#/components/schemas/AuthResData'
      example: null
    ScopesSessionData:
      type: object
      additionalProperties: true
      x-order: 2741601-4
      x-super: '#/components/schemas/SessionData'
      example: null
    SessionData:
      type: object
      additionalProperties: true
      x-order: -255987249-0
      example: null
    TotpPrivateDate:
      type: object
      additionalProperties: true
      description: Data available only for authenticator.
      x-order: 820555017-2
      x-super: '#/components/schemas/AuthPrivateData'
      example: null
    TotpUpdateResData:
      type: object
      additionalProperties: true
      x-order: 820555017-5
      x-super: '#/components/schemas/AuthResData'
      example: null
    AccessToken:
      type: string
      x-order: -2026363309-3
      example: null
    AppSecretReqData:
      type: object
      additionalProperties: true
      x-order: 791325901-2
      x-super: '#/components/schemas/AuthReqData'
      example: null
    AuthReq:
      required:
      - ctx
      - reqData
      type: object
      properties:
        dryRunAuthResData:
          additionalProperties: true
          description: Response provided by dry-run execution
          x-nullable: true
          example: null
        user:
          required:
          - auths
          - factors
          - id
          - logins
          - signedUpAt
          - updatedAt
          type: object
          properties:
            id:
              type: string
              description: |
                Generated user id
              example: fewfvc23f
            logins:
              type: array
              items:
                $ref: '#/components/schemas/Login'
              example: null
            auths:
              type: object
              additionalProperties:
                x-additionalPropertiesName: auth
                $ref: '#/components/schemas/AuthUserCfg'
              description: |
                Data of confirmed auths and sent codes for unconfirmed auths.
              example: null
            factors:
              type: array
              description: Enabled factors
              items:
                type: string
              example: null
            signedUpAt:
              type: integer
              format: int64
              example: null
            updatedAt:
              type: integer
              format: int64
              example: null
            systemAccess:
              type: boolean
              description: Allows to access backend-only APIs. Use `appSecret` auth
                to obtain token with this access.
              default: false
              example: null
          description: User loaded from database. Can be null if user isn't identified
            yet.
          x-nullable: true
          x-super: '#/components/schemas/User'
          example: null
        session:
          required:
          - authenticatedBy
          - data
          - device
          - entry
          - expiresAt
          - id
          - identifiedBy
          - newUser
          - nextFactors
          - refreshedAt
          - signedInAt
          - systemAccess
          - unconfirmedAuths
          type: object
          properties:
            id:
              type: string
              example: null
            entry:
              type: string
              description: Entry that authenticates this session
              example: null
            identifiedBy:
              type: array
              description: Login used to identify this user
              items:
                $ref: '#/components/schemas/LoginId'
              example: null
            userId:
              type: string
              x-nullable: true
              example: null
            authenticatedBy:
              type: object
              additionalProperties:
                type: string
                x-additionalPropertiesName: factor
              description: |
                Authenticator used for factors
              example: null
            unconfirmedAuths:
              type: object
              additionalProperties:
                x-additionalPropertiesName: auth
                $ref: '#/components/schemas/UnconfirmedAuth'
              description: |
                Auths that waiting for confirmation
              example: null
            nextFactors:
              type: array
              description: List of factors needed to authenticate this session
              items:
                $ref: '#/components/schemas/NextFactor'
              example: null
            signedInAt:
              type: integer
              format: int64
              example: null
            expiresAt:
              type: integer
              format: int64
              example: null
            refreshedAt:
              type: integer
              format: int64
              example: null
            newUser:
              type: boolean
              example: null
            device:
              $ref: '#/components/schemas/Device'
            systemAccess:
              type: boolean
              example: null
            data:
              type: object
              additionalProperties:
                properties:
                  agent:
                    type: array
                    items:
                      $ref: '#/components/schemas/LoginId'
                    x-nullable: true
                    example: null
                  scopes:
                    type: array
                    items:
                      type: string
                    example: null
                additionalProperties: true
              example: null
            authenticated:
              type: boolean
              example: null
          description: "Current session, can be null if user edited by admin."
          x-nullable: true
          x-super: '#/components/schemas/Session'
          example: null
        authData:
          required:
          - private
          - public
          type: object
          properties:
            public:
              additionalProperties: true
            private:
              additionalProperties: true
            login:
              type: string
              description: |-
                If authenticator supports identification, it provides login here. This can be email, phone number,
                facebook account id, etc.
              x-nullable: true
              example: null
          description: |-
            Current session data. Null if auth wasn't enabled before. Otherwise, will contain current auth data during
            authenticate and previous data during update-auth request.
          x-nullable: true
          x-super: '#/components/schemas/AuthData'
          example: null
        codeToSend:
          required:
          - attemptsLeft
          - code
          - codeHash
          - sentAt
          - usedAttempts
          - validUntil
          type: object
          properties:
            validUntil:
              type: integer
              format: int64
              example: null
            usedAttempts:
              type: integer
              format: int32
              example: null
            attemptsLeft:
              type: integer
              format: int32
              example: null
            codeHash:
              type: string
              example: null
            sentAt:
              type: integer
              format: int64
              example: null
            code:
              type: string
              example: null
          description: Generated code. Will be null if no code-config specified.
          x-nullable: true
          x-super: '#/components/schemas/Code'
          example: null
        reqData:
          additionalProperties: true
        ctx:
          $ref: '#/components/schemas/ReqCtx'
      x-order: -1249106462-2
      example: null
    AuthReqData:
      type: object
      additionalProperties: true
      x-order: -1249106462-4
      example: null
    AuthUserCfg:
      type: object
      properties:
        data:
          required:
          - private
          - public
          type: object
          properties:
            public:
              additionalProperties: true
            private:
              additionalProperties: true
            login:
              type: string
              description: |-
                If authenticator supports identification, it provides login here. This can be email, phone number,
                facebook account id, etc.
              x-nullable: true
              example: null
          description: Data/State of this authenticator
          x-nullable: true
          x-super: '#/components/schemas/AuthData'
          example: null
        sentCodes:
          type: array
          description: |
            List of auths that wait for confirmation.
          items:
            $ref: '#/components/schemas/UnconfirmedAuthData'
          example: null
      x-order: 332570507-0
      example: null
    AuthorizationCodeAuthReqData:
      type: object
      additionalProperties: true
      x-order: -1836982696-6
      x-super: '#/components/schemas/AuthReqData'
      example: null
    AuthorizationCodeUpdateReqData:
      type: object
      additionalProperties: true
      x-order: -1836982696-4
      x-super: '#/components/schemas/AuthReqData'
      example: null
    Code:
      required:
      - attemptsLeft
      - code
      - codeHash
      - sentAt
      - usedAttempts
      - validUntil
      type: object
      properties:
        validUntil:
          type: integer
          format: int64
          example: null
        usedAttempts:
          type: integer
          format: int32
          example: null
        attemptsLeft:
          type: integer
          format: int32
          example: null
        codeHash:
          type: string
          example: null
        sentAt:
          type: integer
          format: int64
          example: null
        code:
          type: string
          example: null
      x-order: -1249106462-3
      example: null
    CodeVerifier:
      required:
      - attemptsLeft
      - codeHash
      - sentAt
      - usedAttempts
      - validUntil
      type: object
      properties:
        validUntil:
          type: integer
          format: int64
          example: null
        usedAttempts:
          type: integer
          format: int32
          example: null
        attemptsLeft:
          type: integer
          format: int32
          example: null
        codeHash:
          type: string
          example: null
        sentAt:
          type: integer
          format: int64
          example: null
      x-order: 1113303910-0
      example: null
    Device:
      required:
      - mobile
      - userAgent
      type: object
      properties:
        mobile:
          type: boolean
          example: null
        type:
          type: string
          x-nullable: true
          example: null
        browser:
          type: string
          x-nullable: true
          example: null
        userAgent:
          type: string
          example: null
      x-order: 1837614569-0
      example: null
    EmailAuthReqData:
      type: object
      additionalProperties: true
      x-order: 1021533909-3
      x-super: '#/components/schemas/AuthReqData'
      example: null
    EmailUpdateReqData:
      type: object
      additionalProperties: true
      x-order: 1021533909-4
      x-super: '#/components/schemas/AuthReqData'
      example: null
    Login:
      required:
      - login
      - type
      type: object
      properties:
        type:
          type: string
          description: |
            Type of login
          example: email
        login:
          type: string
          description: |
            User unique identifier, email, username, etc. User can use it to sign-in.
          example: john@example.org
        unconfirmedLogin:
          type: string
          description: Login that waits for confirmation.
          x-nullable: true
          example: null
      x-order: -2010674509-0
      example: null
    NextFactor:
      required:
      - factor
      - supportedAuths
      type: object
      properties:
        factor:
          type: string
          example: null
        supportedAuths:
          type: array
          items:
            type: string
          example: null
      x-order: 1296788734-0
      example: null
    NoAuthReqData:
      type: object
      additionalProperties: true
      x-order: -1249106462-5
      x-super: '#/components/schemas/AuthReqData'
      example: null
    OAuthAppAuthReqData:
      type: object
      additionalProperties: true
      x-order: -1247144074-4
      x-super: '#/components/schemas/AuthReqData'
      example: null
    OAuthAppUpdateReqData:
      type: object
      additionalProperties: true
      x-order: -1247144074-5
      x-super: '#/components/schemas/AuthReqData'
      example: null
    OAuthReqData:
      type: object
      additionalProperties: true
      x-order: -893636857-4
      x-super: '#/components/schemas/AuthReqData'
      example: null
    PasswordAuthReqData:
      type: object
      additionalProperties: true
      x-order: -266447761-3
      x-super: '#/components/schemas/AuthReqData'
      example: null
    PasswordUpdateReqData:
      type: object
      additionalProperties: true
      x-order: -266447761-4
      x-super: '#/components/schemas/AuthReqData'
      example: null
    QuestionsAuthReqData:
      type: object
      additionalProperties: true
      x-order: -213229069-3
      x-super: '#/components/schemas/AuthReqData'
      example: null
    QuestionsUpdateReqData:
      type: object
      additionalProperties: true
      x-order: -213229069-5
      x-super: '#/components/schemas/AuthReqData'
      example: null
    ReqCtx:
      required:
      - device
      - headers
      - ip
      type: object
      properties:
        lang:
          type: string
          x-nullable: true
          example: null
        ip:
          type: string
          example: null
        device:
          $ref: '#/components/schemas/Device'
        headers:
          type: object
          additionalProperties:
            type: string
          example: null
      x-order: -418366826-0
      example: null
    ScopesAuthReqData:
      type: object
      additionalProperties: true
      x-order: 2741601-3
      x-super: '#/components/schemas/AuthReqData'
      example: null
    Session:
      required:
      - authenticatedBy
      - data
      - device
      - entry
      - expiresAt
      - id
      - identifiedBy
      - newUser
      - nextFactors
      - refreshedAt
      - signedInAt
      - systemAccess
      - unconfirmedAuths
      type: object
      properties:
        id:
          type: string
          example: null
        entry:
          type: string
          description: Entry that authenticates this session
          example: null
        identifiedBy:
          type: array
          description: Login used to identify this user
          items:
            $ref: '#/components/schemas/LoginId'
          example: null
        userId:
          type: string
          x-nullable: true
          example: null
        authenticatedBy:
          type: object
          additionalProperties:
            type: string
            x-additionalPropertiesName: factor
          description: |
            Authenticator used for factors
          example: null
        unconfirmedAuths:
          type: object
          additionalProperties:
            x-additionalPropertiesName: auth
            $ref: '#/components/schemas/UnconfirmedAuth'
          description: |
            Auths that waiting for confirmation
          example: null
        nextFactors:
          type: array
          description: List of factors needed to authenticate this session
          items:
            $ref: '#/components/schemas/NextFactor'
          example: null
        signedInAt:
          type: integer
          format: int64
          example: null
        expiresAt:
          type: integer
          format: int64
          example: null
        refreshedAt:
          type: integer
          format: int64
          example: null
        newUser:
          type: boolean
          example: null
        device:
          $ref: '#/components/schemas/Device'
        systemAccess:
          type: boolean
          example: null
        data:
          type: object
          additionalProperties:
            properties:
              agent:
                type: array
                items:
                  $ref: '#/components/schemas/LoginId'
                x-nullable: true
                example: null
              scopes:
                type: array
                items:
                  type: string
                example: null
            additionalProperties: true
          example: null
        authenticated:
          type: boolean
          example: null
      x-order: 2013237977-0
      example: null
    TotpAuthReqData:
      type: object
      additionalProperties: true
      x-order: 820555017-3
      x-super: '#/components/schemas/AuthReqData'
      example: null
    TotpUpdateReqData:
      type: object
      additionalProperties: true
      x-order: 820555017-4
      x-super: '#/components/schemas/AuthReqData'
      example: null
    UnconfirmedAuth:
      type: object
      properties:
        sentCodes:
          type: array
          items:
            $ref: '#/components/schemas/CodeVerifier'
          example: null
      x-order: 320227009-0
      example: null
    UnconfirmedAuthData:
      required:
      - code
      - data
      type: object
      properties:
        data:
          $ref: '#/components/schemas/AuthData'
        code:
          $ref: '#/components/schemas/CodeVerifier'
      x-order: 332570507-8
      example: null
    User:
      required:
      - auths
      - factors
      - id
      - logins
      - signedUpAt
      - updatedAt
      type: object
      properties:
        id:
          type: string
          description: |
            Generated user id
          example: fewfvc23f
        logins:
          type: array
          items:
            $ref: '#/components/schemas/Login'
          example: null
        auths:
          type: object
          additionalProperties:
            x-additionalPropertiesName: auth
            $ref: '#/components/schemas/AuthUserCfg'
          description: |
            Data of confirmed auths and sent codes for unconfirmed auths.
          example: null
        factors:
          type: array
          description: Enabled factors
          items:
            type: string
          example: null
        signedUpAt:
          type: integer
          format: int64
          example: null
        updatedAt:
          type: integer
          format: int64
          example: null
        systemAccess:
          type: boolean
          description: Allows to access backend-only APIs. Use `appSecret` auth to
            obtain token with this access.
          default: false
          example: null
      x-order: 276900135-0
      example: null
    DryRunAuthData:
      type: object
      properties:
        login:
          type: string
          description: |-
            If authenticator supports identification, it provides login here. This can be email, phone number,
            facebook account id, etc.
          x-nullable: true
          example: null
      x-order: -1249106462-8
      example: null
    DryRunAuthRes:
      type: object
      properties:
        authData:
          type: object
          properties:
            login:
              type: string
              description: |-
                If authenticator supports identification, it provides login here. This can be email, phone number,
                facebook account id, etc.
              x-nullable: true
              example: null
          description: New auth data to save.
          x-nullable: true
          x-super: '#/components/schemas/DryRunAuthData'
          example: null
        resData:
          additionalProperties: true
          description: This data will be sent back to the client.
          x-nullable: true
          example: null
      x-order: -1249106462-7
      example: null
    FindSessionRes:
      type: object
      properties:
        session:
          $ref: '#/components/schemas/Session'
      x-order: 400707106-2
      example: null
    FindSessionsRes:
      required:
      - sessions
      type: object
      properties:
        sessions:
          type: array
          items:
            $ref: '#/components/schemas/Session'
          example: null
        tooManySessions:
          type: boolean
          description: True if number of sessions in database exceeds some limit
          example: null
      x-order: 400707106-4
      example: null
    SaveSessionReq:
      required:
      - removed
      type: object
      properties:
        userId:
          type: string
          x-nullable: true
          example: null
        updated:
          required:
          - authenticatedBy
          - data
          - device
          - entry
          - expiresAt
          - id
          - identifiedBy
          - newUser
          - nextFactors
          - refreshedAt
          - signedInAt
          - systemAccess
          - unconfirmedAuths
          type: object
          properties:
            id:
              type: string
              example: null
            entry:
              type: string
              description: Entry that authenticates this session
              example: null
            identifiedBy:
              type: array
              description: Login used to identify this user
              items:
                $ref: '#/components/schemas/LoginId'
              example: null
            userId:
              type: string
              x-nullable: true
              example: null
            authenticatedBy:
              type: object
              additionalProperties:
                type: string
                x-additionalPropertiesName: factor
              description: |
                Authenticator used for factors
              example: null
            unconfirmedAuths:
              type: object
              additionalProperties:
                x-additionalPropertiesName: auth
                $ref: '#/components/schemas/UnconfirmedAuth'
              description: |
                Auths that waiting for confirmation
              example: null
            nextFactors:
              type: array
              description: List of factors needed to authenticate this session
              items:
                $ref: '#/components/schemas/NextFactor'
              example: null
            signedInAt:
              type: integer
              format: int64
              example: null
            expiresAt:
              type: integer
              format: int64
              example: null
            refreshedAt:
              type: integer
              format: int64
              example: null
            newUser:
              type: boolean
              example: null
            device:
              $ref: '#/components/schemas/Device'
            systemAccess:
              type: boolean
              example: null
            data:
              type: object
              additionalProperties:
                properties:
                  agent:
                    type: array
                    items:
                      $ref: '#/components/schemas/LoginId'
                    x-nullable: true
                    example: null
                  scopes:
                    type: array
                    items:
                      type: string
                    example: null
                additionalProperties: true
              example: null
            authenticated:
              type: boolean
              example: null
          description: Session to update.
          x-nullable: true
          x-super: '#/components/schemas/Session'
          example: null
        new:
          required:
          - authenticatedBy
          - data
          - device
          - entry
          - expiresAt
          - id
          - identifiedBy
          - newUser
          - nextFactors
          - refreshedAt
          - signedInAt
          - systemAccess
          - unconfirmedAuths
          type: object
          properties:
            id:
              type: string
              example: null
            entry:
              type: string
              description: Entry that authenticates this session
              example: null
            identifiedBy:
              type: array
              description: Login used to identify this user
              items:
                $ref: '#/components/schemas/LoginId'
              example: null
            userId:
              type: string
              x-nullable: true
              example: null
            authenticatedBy:
              type: object
              additionalProperties:
                type: string
                x-additionalPropertiesName: factor
              description: |
                Authenticator used for factors
              example: null
            unconfirmedAuths:
              type: object
              additionalProperties:
                x-additionalPropertiesName: auth
                $ref: '#/components/schemas/UnconfirmedAuth'
              description: |
                Auths that waiting for confirmation
              example: null
            nextFactors:
              type: array
              description: List of factors needed to authenticate this session
              items:
                $ref: '#/components/schemas/NextFactor'
              example: null
            signedInAt:
              type: integer
              format: int64
              example: null
            expiresAt:
              type: integer
              format: int64
              example: null
            refreshedAt:
              type: integer
              format: int64
              example: null
            newUser:
              type: boolean
              example: null
            device:
              $ref: '#/components/schemas/Device'
            systemAccess:
              type: boolean
              example: null
            data:
              type: object
              additionalProperties:
                properties:
                  agent:
                    type: array
                    items:
                      $ref: '#/components/schemas/LoginId'
                    x-nullable: true
                    example: null
                  scopes:
                    type: array
                    items:
                      type: string
                    example: null
                additionalProperties: true
              example: null
            authenticated:
              type: boolean
              example: null
          description: Session to insert
          x-nullable: true
          x-super: '#/components/schemas/Session'
          example: null
        removed:
          type: array
          description: Session ids to remove
          items:
            type: string
          example: null
      x-order: 400707106-3
      example: null
    FindUserRes:
      type: object
      properties:
        user:
          $ref: '#/components/schemas/User'
      x-order: -1537032784-1
      example: null
    SaveUserReq:
      required:
      - newLogins
      - newUsers
      - removedLogins
      - updatedLogins
      - updatedUsers
      - updatedUsersOrLogins
      type: object
      properties:
        removedLogins:
          type: array
          description: Login ids to remove.
          items:
            $ref: '#/components/schemas/LoginId'
          example: null
        updatedUsers:
          type: array
          description: User that must be updated. This list doesn't include users
            that have new/updated/removed logins only.
          items:
            $ref: '#/components/schemas/User'
          example: null
        newUsers:
          type: array
          description: Users to insert
          items:
            $ref: '#/components/schemas/User'
          example: null
        updatedLogins:
          type: array
          description: Logins to update
          items:
            $ref: '#/components/schemas/Login'
          example: null
        newLogins:
          type: array
          description: Logins to insert
          items:
            $ref: '#/components/schemas/Login'
          example: null
        updatedUsersOrLogins:
          type: array
          description: "Alternative approach, if users and logins stored within single\
            \ document - prefer using this field + `newUsers`"
          items:
            $ref: '#/components/schemas/User'
          example: null
      x-order: -1537032784-2
      example: null
    UnauthenticatedCode:
      type: string
      enum:
      - SESSION_EXPIRED
      - ACCESS_DENIED
      - USER_NOT_FOUND
      - TOKEN_EXPIRED
      - UNAUTHENTICATED
    ClientErrCode:
      type: string
      enum:
      - INCORRECT_TOTP_CODE
      - OAUTH_APP_ERR
      - PLUGIN_CLIENT_ERR
      - PASSWORD_IS_INCORRECT
      - PASSWORD_IS_INVALID
      - EMAIL_IS_INCORRECT
      - IP_NEW
      - QUESTIONS_ANSWERS_INCORRECT
      - QUESTIONS_ANSWERS_INVALID
      - SESSION_EXPIRED
      - ACCESS_DENIED
      - USER_NOT_FOUND
      - USER_LOGIN_IS_INVALID
      - USER_LOGIN_ALREADY_TAKEN
      - TOKEN_EXPIRED
      - TOO_MANY_REQS
      - AUTH_IS_NOT_ENABLED
      - AUTH_IS_NOT_CONFIRMED
      - AUTH_REQUIRES_ANOTHER
      - CODE_IS_EXPIRED
      - CODE_TOO_MANY_ATTEMPTS
      - CODE_IS_INCORRECT
      - UNAUTHENTICATED
    IntegrationErrCode:
      type: string
      enum:
      - NO_AUTH_AVAILABLE_FOR_FACTOR
      - INTEGRATION_ERR
    ServerErrCode:
      type: string
      enum:
      - SERVER_ERR
      - PLUGIN_ERR
    ErrCode:
      type: string
      enum:
      - PLUGIN_ERR
      - INCORRECT_TOTP_CODE
      - OAUTH_APP_ERR
      - PLUGIN_CLIENT_ERR
      - PASSWORD_IS_INCORRECT
      - PASSWORD_IS_INVALID
      - EMAIL_IS_INCORRECT
      - IP_NEW
      - QUESTIONS_ANSWERS_INCORRECT
      - QUESTIONS_ANSWERS_INVALID
      - SESSION_EXPIRED
      - ACCESS_DENIED
      - USER_NOT_FOUND
      - USER_LOGIN_IS_INVALID
      - USER_LOGIN_ALREADY_TAKEN
      - TOKEN_EXPIRED
      - TOO_MANY_REQS
      - AUTH_IS_NOT_ENABLED
      - AUTH_IS_NOT_CONFIRMED
      - NO_AUTH_AVAILABLE_FOR_FACTOR
      - AUTH_REQUIRES_ANOTHER
      - CODE_IS_EXPIRED
      - CODE_TOO_MANY_ATTEMPTS
      - CODE_IS_INCORRECT
      - UNAUTHENTICATED
      - SERVER_ERR
      - INTEGRATION_ERR
      - ANY_ERR
    ErrProps:
      type: string
      enum:
      - code
      - devMsg
      - msg
      - incorrectRedirectUri
      - incorrectSecret
      - changedAt
      - changedDaysAgo
      - tooLong
      - tooShort
      - missingNumber
      - missingSymbol
      - missingUpperCase
      - missingLowerCase
      - commonPassword
      - wasUsedBeforeAt
      - matchesLogin
      - passwordsMismatch
      - strength
      - wasUsedDaysAgo
      - incorrectAnswers
      - requiresMoreAnswers
      - questionsNotFound
      - invalidAnswers
      - tooManyAnswers
      - waitTimeMs
      - waitTimeSeconds
      - waitTimeMinutes
      - expiredAt
      - loginId
    AnyErrProps:
      type: string
      enum:
      - code
      - devMsg
      - msg
    ClientErrProps:
      type: string
      enum:
      - code
      - devMsg
      - msg
      - incorrectRedirectUri
      - incorrectSecret
      - changedAt
      - changedDaysAgo
      - tooLong
      - tooShort
      - missingNumber
      - missingSymbol
      - missingUpperCase
      - missingLowerCase
      - commonPassword
      - wasUsedBeforeAt
      - matchesLogin
      - passwordsMismatch
      - strength
      - wasUsedDaysAgo
      - incorrectAnswers
      - requiresMoreAnswers
      - questionsNotFound
      - invalidAnswers
      - tooManyAnswers
      - waitTimeMs
      - waitTimeSeconds
      - waitTimeMinutes
      - expiredAt
      - loginId
    IntegrationErrProps:
      type: string
      enum:
      - code
      - devMsg
      - msg
    PluginClientErrProps:
      type: string
      enum:
      - code
      - devMsg
      - msg
    ServerErrProps:
      type: string
      enum:
      - code
      - devMsg
      - msg
    UnauthenticatedProps:
      type: string
      enum:
      - code
      - devMsg
      - msg
      - expiredAt
    AuthDataPublicProps:
      type: string
      enum:
      - email
      - updatedAt
      - redirectUris
      - answersSavedAt
    AuthDataPrivateProps:
      type: string
      enum:
      - encodedIps
      - secretHash
      - passwords
      - changedAt
      - answers
      - secret
    AuthResResDataProps:
      type: string
      enum:
      - authorizationCode
      - emailSentTo
      - ipEncoded
      - clientId
      - redirectUris
      - clientSecret
      - extractedLogin
      - extractedPublicData
      - password
      - strength
      - correct
      - answersSavedAt
      - secret
      - otpUrl
      - otpUrlQrCode
    AuthResSessionDataProps:
      type: string
      enum:
      - agent
      - scopes
    AuthorizationCodeSessionDataProps:
      type: string
      enum:
      - agent
      - scopes
    AuthorizationCodeUpdateResDataProps:
      type: string
      enum:
      - authorizationCode
    EmailAuthResDataProps:
      type: string
      enum:
      - emailSentTo
    EmailPublicDataProps:
      type: string
      enum:
      - email
      - updatedAt
    IpAuthResDataProps:
      type: string
      enum:
      - ipEncoded
    IpPrivateDataProps:
      type: string
      enum:
      - encodedIps
    OAuthAppPrivateDataProps:
      type: string
      enum:
      - secretHash
    OAuthAppPublicDataProps:
      type: string
      enum:
      - redirectUris
    OAuthAppUpdateResDataProps:
      type: string
      enum:
      - clientId
      - redirectUris
      - clientSecret
    OAuthResDataProps:
      type: string
      enum:
      - extractedLogin
      - extractedPublicData
    PasswordHistoryProps:
      type: string
      enum:
      - passwords
      - changedAt
    PasswordPublicDataProps:
      type: string
      enum:
      - updatedAt
    PasswordUpdateResDataProps:
      type: string
      enum:
      - password
      - strength
    QuestionsAuthResDataProps:
      type: string
      enum:
      - correct
    QuestionsPrivateDataProps:
      type: string
      enum:
      - answers
    QuestionsPublicDataProps:
      type: string
      enum:
      - answersSavedAt
    QuestionsUpdateResDataProps:
      type: string
      enum:
      - answersSavedAt
    ScopesSessionDataProps:
      type: string
      enum:
      - agent
      - scopes
    TotpPrivateDateProps:
      type: string
      enum:
      - secret
    TotpUpdateResDataProps:
      type: string
      enum:
      - secret
      - otpUrl
      - otpUrlQrCode
    AppSecretReqDataProps:
      type: string
      enum:
      - secret
    AuthReqDryRunAuthResDataProps:
      type: string
      enum:
      - authorizationCode
      - emailSentTo
      - ipEncoded
      - clientId
      - redirectUris
      - clientSecret
      - extractedLogin
      - extractedPublicData
      - password
      - strength
      - correct
      - answersSavedAt
      - secret
      - otpUrl
      - otpUrlQrCode
    AuthReqReqDataProps:
      type: string
      enum:
      - secret
      - authorizationCode
      - agentAccessToken
      - agentLogins
      - scopes
      - email
      - template
      - templateParams
      - clientId
      - clientSecret
      - redirectUri
      - redirectUris
      - newClientSecret
      - accessToken
      - password
      - confirmPassword
      - answers
      - code
      - issuer
      - accountName
    AuthorizationCodeAuthReqDataProps:
      type: string
      enum:
      - authorizationCode
      - agentAccessToken
    AuthorizationCodeUpdateReqDataProps:
      type: string
      enum:
      - agentLogins
      - scopes
    EmailAuthReqDataProps:
      type: string
      enum:
      - email
      - template
      - templateParams
    EmailUpdateReqDataProps:
      type: string
      enum:
      - email
      - template
      - templateParams
    OAuthAppAuthReqDataProps:
      type: string
      enum:
      - clientId
      - clientSecret
      - redirectUri
    OAuthAppUpdateReqDataProps:
      type: string
      enum:
      - redirectUris
      - newClientSecret
    OAuthReqDataProps:
      type: string
      enum:
      - accessToken
      - authorizationCode
      - redirectUri
    PasswordAuthReqDataProps:
      type: string
      enum:
      - password
    PasswordUpdateReqDataProps:
      type: string
      enum:
      - password
      - confirmPassword
    QuestionsAuthReqDataProps:
      type: string
      enum:
      - answers
    QuestionsUpdateReqDataProps:
      type: string
      enum:
      - answers
    ScopesAuthReqDataProps:
      type: string
      enum:
      - agentLogins
      - scopes
    TotpAuthReqDataProps:
      type: string
      enum:
      - code
    TotpUpdateReqDataProps:
      type: string
      enum:
      - secret
      - issuer
      - accountName
    DryRunAuthResResDataProps:
      type: string
      enum:
      - authorizationCode
      - emailSentTo
      - ipEncoded
      - clientId
      - redirectUris
      - clientSecret
      - extractedLogin
      - extractedPublicData
      - password
      - strength
      - correct
      - answersSavedAt
      - secret
      - otpUrl
      - otpUrlQrCode
x-tagGroups:
- name: Api
  tags:
  - plugin/auth
  - plugin/repo/user
  - plugin/repo/session
  - plugin/rate-limiter
